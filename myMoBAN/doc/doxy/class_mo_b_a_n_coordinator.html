<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MoBAN: MoBANCoordinator Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MoBANCoordinator Class Reference</h1><!-- doxytag: class="MoBANCoordinator" --><!-- doxytag: inherits="cSimpleModule" -->This is the coordinator module of the MoBAN mobility model. It should be instantiated in the top level simulation network in MiXiM, once per WBAN. The coordinator module is the main module that provides the group mobility and correlation between nodes in a WBAN. In the initialization phase, it reads three user defined input files which are the postures specification file, a configuration file which includes all required parameter for specific distributions, and the previously logged mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>, if it is requested to use a logged <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>. Note that all WBAN instances may use the same input files if they are exactly in the same situation.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for MoBANCoordinator:</div>
<div class="dynsection">

<p><center><img src="class_mo_b_a_n_coordinator.png" usemap="#MoBANCoordinator_map" border="0" alt=""></center>
<map name="MoBANCoordinator_map">
<area doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html" alt="cSimpleModule" shape="rect" coords="90,392,261,416">
<area doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcModule.html" alt="cModule" shape="rect" coords="90,336,261,360">
<area doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html" alt="cComponent" shape="rect" coords="90,280,261,304">
<area doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcDefaultList.html" alt="cDefaultList" shape="rect" coords="90,224,261,248">
<area doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcNoncopyableOwnedObject.html" alt="cNoncopyableOwnedObject" shape="rect" coords="90,168,261,192">
<area doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcOwnedObject.html" alt="cOwnedObject" shape="rect" coords="0,112,171,136">
<area doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classnoncopyable.html" alt="noncopyable" shape="rect" coords="181,112,352,136">
<area doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcNamedObject.html" alt="cNamedObject" shape="rect" coords="0,56,171,80">
<area doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcObject.html" alt="cObject" shape="rect" coords="0,0,171,24">
</map>
</div>

<p>
<a href="class_mo_b_a_n_coordinator-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html">pattern</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data type for one instance of mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>.  <a href="struct_mo_b_a_n_coordinator_1_1pattern.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#9e116be526a0d4f1f4482728f32c237c">initialize</a> (int)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the MoBAN mobility model.  <a href="#9e116be526a0d4f1f4482728f32c237c"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb93">posture_sel_type</a> { <a class="el" href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb9357a18191c1994fee0d7b81c953ff015d">UNIFORM_RANDOM</a> =  0, 
<a class="el" href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb936f0a336baf0f4a679087d3198a9582a1">MARKOV_BASE</a>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Possible (supported) strategies for posture selection.  <a href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb93">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef struct <br class="typebreak">
<a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html">MoBANCoordinator::pattern</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#ba7c0480967381f3cb5c09b05029abe7">Pattern</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data type for one instance of mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>.  <a href="#ba7c0480967381f3cb5c09b05029abe7"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#16e49488978538b472692ccd1cd893e9">handleMessage</a> (<a class="elRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcMessage.html">cMessage</a> *msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handes self messages and initiate the next message for updateInterval seconds later.  <a href="#16e49488978538b472692ccd1cd893e9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#3746b224f6ff4655f5618c5c48bb6c48">finish</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">To be called at the end of simulation run.  <a href="#3746b224f6ff4655f5618c5c48bb6c48"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#b622d4b167d9d5dbc7529969a6688597">selectPosture</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to select the next posture considering the current posture and the Markov model.  <a href="#b622d4b167d9d5dbc7529969a6688597"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Coord&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#debee0a447b7e85d444054fa3a4ee013">selectDestination</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to select the destination in the case of a mobile posture.  <a href="#debee0a447b7e85d444054fa3a4ee013"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#6d83b8c03d91b0fee3e335b214f51b4c">selectSpeed</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Select a velocity value within the given velocity range.  <a href="#6d83b8c03d91b0fee3e335b214f51b4c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#b4f9d86a51c84b083817db1fcbe9dbab">selectDuration</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Select a stay time duration in the specified range for the new posture.  <a href="#b4f9d86a51c84b083817db1fcbe9dbab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#b69a463af831ecb1c87daa61c09c9509">mainProcess</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The main process of the MoBAN mobility model.  <a href="#b69a463af831ecb1c87daa61c09c9509"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#bfe32e4c7881e7b5d5276e5b90fb82a6">stepMove</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Making one step move and publishing the new reference point position to all belonging nodes.  <a href="#bfe32e4c7881e7b5d5276e5b90fb82a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#a9e9424cb4572715a8f5b042aa4155d0">isInsideWorld</a> (Coord)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks if all nodes of the WBAN are inside the simulation environment w ith the given position of the logical center.  <a href="#a9e9424cb4572715a8f5b042aa4155d0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#ab85ba2010884afd66f619718e1194d7">readPostureSpecificationFile</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reading the input postures specification file and making the posture data base.  <a href="#ab85ba2010884afd66f619718e1194d7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#138ebd67882d6cf1154126f47d35d49c">readConfigurationFile</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads the input configuration file.  <a href="#138ebd67882d6cf1154126f47d35d49c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#31810405333b184c9db891fa9bd8a12a">readMobilityPatternFile</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads the previously logged mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> and make mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> data base.  <a href="#31810405333b184c9db891fa9bd8a12a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#7e5b78357b30b23f2f8285dcde5c6dd9">publishToNodes</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Publishes the reference point and other information of the posture to the blackboard of the belonging nodes.  <a href="#7e5b78357b30b23f2f8285dcde5c6dd9"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#970cba11aaab643710065c962ce626fc">debug</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Debug switch for all other modules.  <a href="#970cba11aaab643710065c962ce626fc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">BaseUtility *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#5350548b74b23200b0ba382f157d334b">utility</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to the BaseUtility.  <a href="#5350548b74b23200b0ba382f157d334b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">BaseWorldUtility *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#19061b8cb8295d5afce5e95bb1c8ea99">world</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to the BaseWorldUtility.  <a href="#19061b8cb8295d5afce5e95bb1c8ea99"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="elRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcModule.html">cModule</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#7ad23bfc4185e34e462e2b06d349a78f">network</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to the top level (network).  <a href="#7ad23bfc4185e34e462e2b06d349a78f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#4b679462d1e5489af4b5a5480f22fdaa">updateInterval</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Interval for updating the move (NED parameter).  <a href="#4b679462d1e5489af4b5a5480f22fdaa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="elRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcMessage.html">cMessage</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#aaf28b9f6f1de9fdf6872f123a7f3d53">MoveMsg</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A self message to trigger move step every updateInterval seconds.  <a href="#aaf28b9f6f1de9fdf6872f123a7f3d53"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#92a0e36ffb244bc6ed6beaf98e986c05">numNodes</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of nodes in the this WBAN.  <a href="#92a0e36ffb244bc6ed6beaf98e986c05"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#fdfb553fa2576a3e72a6111b12f14a97">speed</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Currently selected speed for the mobile posture.  <a href="#fdfb553fa2576a3e72a6111b12f14a97"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#5320bb16f51acc82b6419911a280e11d">index</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Index of this WBAN.  <a href="#5320bb16f51acc82b6419911a280e11d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">FILE *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#bb700aed062784b7cb21eec3e146c80d">logfile</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to the file for logging MoBAN mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> for future use.  <a href="#bb700aed062784b7cb21eec3e146c80d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#3880f0e3e0e489b1edd2692a441b903f">numPostures</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of predefined postures.  <a href="#3880f0e3e0e489b1edd2692a441b903f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::vector&lt; <a class="el" href="class_posture.html">Posture</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5">postureList</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The list of all predefined postures (posture data base).  <a href="#fbb28bcb93bda1faadc7030d86be43b5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_posture.html">Posture</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46">currentPosture</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The current selected posture.  <a href="#19a97a40859c36012f3a63a7c9ef9b46"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#e65c511653f346fbb079389ab23b62cf">duration</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The selected duration of the current posture.  <a href="#e65c511653f346fbb079389ab23b62cf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#ac48e46d43458a8f960cc33e84ac85e8">minDuration</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The minimum value of the duration for stable postures.  <a href="#ac48e46d43458a8f960cc33e84ac85e8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#02c4e8d23a6b0b2e1a1d94abe1974b9f">maxDuration</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The maximum value of the duration for stable postures.  <a href="#02c4e8d23a6b0b2e1a1d94abe1974b9f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#2066591b0b290550ee350b5a57c0c700">nodeIndex</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the index list of nodes belong to this WBAN  <a href="#2066591b0b290550ee350b5a57c0c700"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Coord&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b">logicalCenter</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Current position of the logical center of the group.  <a href="#2d0384199e2090caae09813e7d7f0d3b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#c1a5ee7eeedb62fdfcee79fb6234f762">step</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of steps already moved.  <a href="#c1a5ee7eeedb62fdfcee79fb6234f762"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#f177cb826e1fec16faf7c7cbd0390cf5">numSteps</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Total number of steps of the current move or current posture.  <a href="#f177cb826e1fec16faf7c7cbd0390cf5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Coord&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#56143810b39a6031abe1cc59a18136c3">targetPos</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Selected destination for the ongoing move of the logical center.  <a href="#56143810b39a6031abe1cc59a18136c3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Coord&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#25c1728a5480570b4b8fe51b4a4a5f02">stepTarget</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The intermediate target of the current move step.  <a href="#25c1728a5480570b4b8fe51b4a4a5f02"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Coord&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#56735487e55a96bd1294af15883f2d9c">stepSize</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The size of the current move step.  <a href="#56735487e55a96bd1294af15883f2d9c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#6f67cb3412735ec31734d8a345688e5b">useMobilityPattern</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Variable that shows if reusing previously logged mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> is requested. The value is gotten from the parameter of the module.  <a href="#6f67cb3412735ec31734d8a345688e5b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html">Pattern</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#e19a9a2dce220a75c4757381b5f348a7">mobilityPattern</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> data base.  <a href="#e19a9a2dce220a75c4757381b5f348a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#00cbcb40ee4039ffd5723ffa4334d88f">patternLength</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> instances which has been read from the input file (length of mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> data base).  <a href="#00cbcb40ee4039ffd5723ffa4334d88f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#eff87bd9af8cb9aa14eada4b73ec4fbe">currentPattern</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The index of the currently applied mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> from.  <a href="#eff87bd9af8cb9aa14eada4b73ec4fbe"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#406987de5c4e38c461e0857583c115b2">markovMatrix</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A matrix which maintains the transition probabilities of the Markov Model of posture <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>. To be given through configuration file.  <a href="#406987de5c4e38c461e0857583c115b2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb93">posture_sel_type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#626ad8d08de1e3d7fad2c8032f199933">postureSelStrategy</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The requested strategy for posture selection. To be given through configuration file.  <a href="#626ad8d08de1e3d7fad2c8032f199933"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_posture_transition.html">PostureTransition</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_mo_b_a_n_coordinator.html#51f9fc44b5168e7ef6e58fd221bf3f0a">transitions</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Class for performing operation for spatial and temporal correlations in posture selection.  <a href="#51f9fc44b5168e7ef6e58fd221bf3f0a"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is the coordinator module of the MoBAN mobility model. It should be instantiated in the top level simulation network in MiXiM, once per WBAN. The coordinator module is the main module that provides the group mobility and correlation between nodes in a WBAN. In the initialization phase, it reads three user defined input files which are the postures specification file, a configuration file which includes all required parameter for specific distributions, and the previously logged mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>, if it is requested to use a logged <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>. Note that all WBAN instances may use the same input files if they are exactly in the same situation. 
<p>
After the initialization phase, the MoBAN coordinator decides about the posture and the position of the Logical center of the group (WBAN). The absolute position of the reference point of each belonging node is calculated by adding the current position of the logical center by the reference point of that node in the selected posture. The coordinator publish the position of the reference point as well as the speed and the radius of the local movement of nodes to their blackboards.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Majid Nabi </dd></dl>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00073">73</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>
<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="ba7c0480967381f3cb5c09b05029abe7"></a><!-- doxytag: member="MoBANCoordinator::Pattern" ref="ba7c0480967381f3cb5c09b05029abe7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html">MoBANCoordinator::pattern</a> <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html">MoBANCoordinator::Pattern</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Data type for one instance of mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>. 
<p>

</div>
</div><p>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="891080762617c76085a1c4cd618fbb93"></a><!-- doxytag: member="MoBANCoordinator::posture_sel_type" ref="891080762617c76085a1c4cd618fbb93" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb93">MoBANCoordinator::posture_sel_type</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Possible (supported) strategies for posture selection. 
<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="891080762617c76085a1c4cd618fbb9357a18191c1994fee0d7b81c953ff015d"></a><!-- doxytag: member="UNIFORM_RANDOM" ref="891080762617c76085a1c4cd618fbb9357a18191c1994fee0d7b81c953ff015d" args="" -->UNIFORM_RANDOM</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="891080762617c76085a1c4cd618fbb936f0a336baf0f4a679087d3198a9582a1"></a><!-- doxytag: member="MARKOV_BASE" ref="891080762617c76085a1c4cd618fbb936f0a336baf0f4a679087d3198a9582a1" args="" -->MARKOV_BASE</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00178">178</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00178"></a>00178                           {
<a name="l00179"></a>00179       <a class="code" href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb9357a18191c1994fee0d7b81c953ff015d">UNIFORM_RANDOM</a> = 0,   <span class="comment">// uniform random posture selection. No correlation is applied.</span>
<a name="l00180"></a>00180       <a class="code" href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb936f0a336baf0f4a679087d3198a9582a1">MARKOV_BASE</a>                   <span class="comment">// Either a Markov model matrix or a steady state vector is given for space-time domains</span>
<a name="l00181"></a>00181     };
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="3746b224f6ff4655f5618c5c48bb6c48"></a><!-- doxytag: member="MoBANCoordinator::finish" ref="3746b224f6ff4655f5618c5c48bb6c48" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MoBANCoordinator::finish           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
To be called at the end of simulation run. 
<p>
This function is called at the end of simulation run. 
<p>Reimplemented from <a class="elRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#85912f961df471a9795d4e8454d9f6b0">cComponent</a>.</p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00306">306</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00306"></a>00306                               {
<a name="l00307"></a>00307 
<a name="l00308"></a>00308         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#59d46fbc9a77cb3e8164b0f624a51699">cancelAndDelete</a>(<a class="code" href="class_mo_b_a_n_coordinator.html#aaf28b9f6f1de9fdf6872f123a7f3d53" title="A self message to trigger move step every updateInterval seconds.">MoveMsg</a>);
<a name="l00309"></a>00309         fclose(<a class="code" href="class_mo_b_a_n_coordinator.html#bb700aed062784b7cb21eec3e146c80d" title="Pointer to the file for logging MoBAN mobility pattern for future use.">logfile</a>);
<a name="l00310"></a>00310 
<a name="l00311"></a>00311 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="16e49488978538b472692ccd1cd893e9"></a><!-- doxytag: member="MoBANCoordinator::handleMessage" ref="16e49488978538b472692ccd1cd893e9" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MoBANCoordinator::handleMessage           </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcMessage.html">cMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handes self messages and initiate the next message for updateInterval seconds later. 
<p>
Handling self message and initiate the next message with the given parameter updateInterval. 
<p>Reimplemented from <a class="elRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#c1a639fd9b931de297477fca26341650">cSimpleModule</a>.</p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00094">94</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00094"></a>00094                                                    {
<a name="l00095"></a>00095         <span class="keywordflow">if</span> (msg == <a class="code" href="class_mo_b_a_n_coordinator.html#aaf28b9f6f1de9fdf6872f123a7f3d53" title="A self message to trigger move step every updateInterval seconds.">MoveMsg</a>) {
<a name="l00096"></a>00096                 <a class="code" href="class_mo_b_a_n_coordinator.html#bfe32e4c7881e7b5d5276e5b90fb82a6" title="Making one step move and publishing the new reference point position to all belonging...">stepMove</a>();
<a name="l00097"></a>00097                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#29a64f1f0c560ac75494940d5c7a048d">scheduleAt</a>(simTime() + <a class="code" href="class_mo_b_a_n_coordinator.html#4b679462d1e5489af4b5a5480f22fdaa" title="Interval for updating the move (NED parameter).">updateInterval</a>, msg);
<a name="l00098"></a>00098         } <span class="keywordflow">else</span>
<a name="l00099"></a>00099                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"MoBAN Coordinator: unexpected message!"</span>);
<a name="l00100"></a>00100 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="9e116be526a0d4f1f4482728f32c237c"></a><!-- doxytag: member="MoBANCoordinator::initialize" ref="9e116be526a0d4f1f4482728f32c237c" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MoBANCoordinator::initialize           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initializes the MoBAN mobility model. 
<p>

<p>Reimplemented from <a class="elRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#504f2d6eb1bcd03d3ef9809648e4988f">cComponent</a>.</p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00030">30</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00030"></a>00030                                            {
<a name="l00031"></a>00031 
<a name="l00032"></a>00032         <span class="keywordflow">if</span> (stage == 0) {
<a name="l00033"></a>00033                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#b141a27f189cdb719678436363e19ae2">hasPar</a>(<span class="stringliteral">"debug"</span>) ? <a class="code" href="class_mo_b_a_n_coordinator.html#970cba11aaab643710065c962ce626fc" title="Debug switch for all other modules.">debug</a> = <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#73111b3f286cc723519595a4d8d318f7">par</a>(<span class="stringliteral">"debug"</span>).<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcPar.html#f54ea2fcc7ad0048f216ed0e67af2a44">boolValue</a>() : <a class="code" href="class_mo_b_a_n_coordinator.html#970cba11aaab643710065c962ce626fc" title="Debug switch for all other modules.">debug</a> = <span class="keyword">false</span>;
<a name="l00034"></a>00034 
<a name="l00035"></a>00035                 <a class="code" href="class_mo_b_a_n_coordinator.html#6f67cb3412735ec31734d8a345688e5b" title="Variable that shows if reusing previously logged mobility pattern is requested. The...">useMobilityPattern</a> = <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#73111b3f286cc723519595a4d8d318f7">par</a>(<span class="stringliteral">"useMobilityPattern"</span>).<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcPar.html#f54ea2fcc7ad0048f216ed0e67af2a44">boolValue</a>();
<a name="l00036"></a>00036                 <a class="code" href="class_mo_b_a_n_coordinator.html#4b679462d1e5489af4b5a5480f22fdaa" title="Interval for updating the move (NED parameter).">updateInterval</a> = <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#73111b3f286cc723519595a4d8d318f7">par</a>(<span class="stringliteral">"updateInterval"</span>).<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcPar.html#0127b9c09f69503b5cf91e49ce473ddf">doubleValue</a>();
<a name="l00037"></a>00037                 <a class="code" href="class_mo_b_a_n_coordinator.html#92a0e36ffb244bc6ed6beaf98e986c05" title="The number of nodes in the this WBAN.">numNodes</a> = <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#73111b3f286cc723519595a4d8d318f7">par</a>(<span class="stringliteral">"numNodes"</span>).<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcPar.html#bf151b2b709538c7618ed9160567bfe3">longValue</a>();
<a name="l00038"></a>00038 
<a name="l00039"></a>00039                 <a class="code" href="class_mo_b_a_n_coordinator.html#5320bb16f51acc82b6419911a280e11d" title="Index of this WBAN.">index</a> = <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcModule.html#604e26394d77938a860eeb4452f25606">getIndex</a>(); <span class="comment">// Index of this WBAN</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041                 <span class="comment">// a pointer to world module</span>
<a name="l00042"></a>00042                 <a class="code" href="class_mo_b_a_n_coordinator.html#19061b8cb8295d5afce5e95bb1c8ea99" title="Pointer to the BaseWorldUtility.">world</a> = FindModule&lt;BaseWorldUtility*&gt;::findGlobalModule();
<a name="l00043"></a>00043                 <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#19061b8cb8295d5afce5e95bb1c8ea99" title="Pointer to the BaseWorldUtility.">world</a> == NULL)
<a name="l00044"></a>00044                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"Could not find BaseWorldUtility module"</span>);
<a name="l00045"></a>00045                 <a class="code" href="class_mo_b_a_n_coordinator.html#7ad23bfc4185e34e462e2b06d349a78f" title="Pointer to the top level (network).">network</a> = <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcModule.html#6e487556d9301e41654d25c767d58148">getParentModule</a>();
<a name="l00046"></a>00046 
<a name="l00047"></a>00047                 <span class="comment">//preparing output mobility pattern log file</span>
<a name="l00048"></a>00048                 <span class="keywordtype">char</span> log_file_name[70];
<a name="l00049"></a>00049                 sprintf(log_file_name, <span class="stringliteral">"MoBAN_Pattern_out%d.txt"</span>, <a class="code" href="class_mo_b_a_n_coordinator.html#5320bb16f51acc82b6419911a280e11d" title="Index of this WBAN.">index</a>);
<a name="l00050"></a>00050                 <a class="code" href="class_mo_b_a_n_coordinator.html#bb700aed062784b7cb21eec3e146c80d" title="Pointer to the file for logging MoBAN mobility pattern for future use.">logfile</a> = fopen(log_file_name, <span class="stringliteral">"w"</span>);
<a name="l00051"></a>00051 
<a name="l00052"></a>00052                 <span class="keywordflow">if</span> (!<a class="code" href="class_mo_b_a_n_coordinator.html#ab85ba2010884afd66f619718e1194d7" title="Reading the input postures specification file and making the posture data base.">readPostureSpecificationFile</a>())
<a name="l00053"></a>00053                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"MoBAN Coordinator: error in reading the posture specification file"</span>);
<a name="l00054"></a>00054 
<a name="l00055"></a>00055                 <span class="keywordflow">if</span> (!<a class="code" href="class_mo_b_a_n_coordinator.html#138ebd67882d6cf1154126f47d35d49c" title="Reads the input configuration file.">readConfigurationFile</a>())
<a name="l00056"></a>00056                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"MoBAN Coordinator: error in reading the input configuration file"</span>);
<a name="l00057"></a>00057 
<a name="l00058"></a>00058                 <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#6f67cb3412735ec31734d8a345688e5b" title="Variable that shows if reusing previously logged mobility pattern is requested. The...">useMobilityPattern</a>)
<a name="l00059"></a>00059                         <span class="keywordflow">if</span> (!<a class="code" href="class_mo_b_a_n_coordinator.html#31810405333b184c9db891fa9bd8a12a" title="Reads the previously logged mobility pattern and make mobility pattern data base...">readMobilityPatternFile</a>())
<a name="l00060"></a>00060                                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"MoBAN Coordinator: error in reading the input mobility pattern file"</span>);
<a name="l00061"></a>00061 
<a name="l00062"></a>00062                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcModule.html">cModule</a> *gHost;
<a name="l00063"></a>00063                 <a class="code" href="class_mo_b_a_n_coordinator.html#2066591b0b290550ee350b5a57c0c700" title="the index list of nodes belong to this WBAN">nodeIndex</a> = <span class="keyword">new</span> <span class="keywordtype">int</span>[<a class="code" href="class_mo_b_a_n_coordinator.html#92a0e36ffb244bc6ed6beaf98e986c05" title="The number of nodes in the this WBAN.">numNodes</a>];
<a name="l00064"></a>00064 
<a name="l00065"></a>00065                 <span class="comment">//Make the list of nodes belong to this WBAN.</span>
<a name="l00066"></a>00066                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tempNum = 0;
<a name="l00067"></a>00067                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> totalNumNodes = <a class="code" href="class_mo_b_a_n_coordinator.html#7ad23bfc4185e34e462e2b06d349a78f" title="Pointer to the top level (network).">network</a>-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#73111b3f286cc723519595a4d8d318f7">par</a>(<span class="stringliteral">"numNodes"</span>).<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcPar.html#bf151b2b709538c7618ed9160567bfe3">longValue</a>();
<a name="l00068"></a>00068                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; totalNumNodes; ++i) {
<a name="l00069"></a>00069                         gHost = <a class="code" href="class_mo_b_a_n_coordinator.html#7ad23bfc4185e34e462e2b06d349a78f" title="Pointer to the top level (network).">network</a>-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcModule.html#99f25de7d151adbe802c9b8811ee8e5b">getSubmodule</a>(<span class="stringliteral">"node"</span>, i)-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcModule.html#99f25de7d151adbe802c9b8811ee8e5b">getSubmodule</a>(<span class="stringliteral">"mobility"</span>,0);
<a name="l00070"></a>00070                         <span class="keywordflow">if</span> (gHost-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#b141a27f189cdb719678436363e19ae2">hasPar</a>(<span class="stringliteral">"coordinatorIndex"</span>))
<a name="l00071"></a>00071                                 <span class="keywordflow">if</span> (gHost-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#73111b3f286cc723519595a4d8d318f7">par</a>(<span class="stringliteral">"coordinatorIndex"</span>).<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcPar.html#bf151b2b709538c7618ed9160567bfe3">longValue</a>() == <a class="code" href="class_mo_b_a_n_coordinator.html#5320bb16f51acc82b6419911a280e11d" title="Index of this WBAN.">index</a>) {
<a name="l00072"></a>00072                                         ++tempNum;
<a name="l00073"></a>00073                                         <span class="keywordflow">if</span> (tempNum &gt; <a class="code" href="class_mo_b_a_n_coordinator.html#92a0e36ffb244bc6ed6beaf98e986c05" title="The number of nodes in the this WBAN.">numNodes</a>)
<a name="l00074"></a>00074                                                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(
<a name="l00075"></a>00075                                                                 <span class="stringliteral">"MoBAN Coordinator: wrong number of belonging nodes to the coordinator."</span>);
<a name="l00076"></a>00076                                         <a class="code" href="class_mo_b_a_n_coordinator.html#2066591b0b290550ee350b5a57c0c700" title="the index list of nodes belong to this WBAN">nodeIndex</a>[tempNum - 1] = i;
<a name="l00077"></a>00077                                 }
<a name="l00078"></a>00078                 }
<a name="l00079"></a>00079                 <span class="keywordflow">if</span> (tempNum != <a class="code" href="class_mo_b_a_n_coordinator.html#92a0e36ffb244bc6ed6beaf98e986c05" title="The number of nodes in the this WBAN.">numNodes</a>)
<a name="l00080"></a>00080                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(
<a name="l00081"></a>00081                                         <span class="stringliteral">"MoBAN Coordinator: wrong number of belonging nodes to the coordinator."</span>);
<a name="l00082"></a>00082 
<a name="l00083"></a>00083                 <a class="code" href="class_mo_b_a_n_coordinator.html#b69a463af831ecb1c87daa61c09c9509" title="The main process of the MoBAN mobility model.">mainProcess</a>();
<a name="l00084"></a>00084                 <a class="code" href="class_mo_b_a_n_coordinator.html#7e5b78357b30b23f2f8285dcde5c6dd9" title="Publishes the reference point and other information of the posture to the blackboard...">publishToNodes</a>();
<a name="l00085"></a>00085 
<a name="l00086"></a>00086                 <a class="code" href="class_mo_b_a_n_coordinator.html#aaf28b9f6f1de9fdf6872f123a7f3d53" title="A self message to trigger move step every updateInterval seconds.">MoveMsg</a> = <span class="keyword">new</span> <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcOwnedObject.html#f46e516dfdf6a913fe913c4c2e496cf2">cMessage</a>(<span class="stringliteral">"Move"</span>);
<a name="l00087"></a>00087                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#29a64f1f0c560ac75494940d5c7a048d">scheduleAt</a>(simTime() + <a class="code" href="class_mo_b_a_n_coordinator.html#4b679462d1e5489af4b5a5480f22fdaa" title="Interval for updating the move (NED parameter).">updateInterval</a>, <a class="code" href="class_mo_b_a_n_coordinator.html#aaf28b9f6f1de9fdf6872f123a7f3d53" title="A self message to trigger move step every updateInterval seconds.">MoveMsg</a>);
<a name="l00088"></a>00088         }
<a name="l00089"></a>00089 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a9e9424cb4572715a8f5b042aa4155d0"></a><!-- doxytag: member="MoBANCoordinator::isInsideWorld" ref="a9e9424cb4572715a8f5b042aa4155d0" args="(Coord)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MoBANCoordinator::isInsideWorld           </td>
          <td>(</td>
          <td class="paramtype">Coord&nbsp;</td>
          <td class="paramname"> <em>tPos</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if all nodes of the WBAN are inside the simulation environment w ith the given position of the logical center. 
<p>
Checks if all nodes of the WBAN are inside the simulation environment with the given position of the logical center. 
<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00290">290</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00290"></a>00290                                                {
<a name="l00291"></a>00291         Coord absolutePosition;
<a name="l00292"></a>00292 
<a name="l00293"></a>00293         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_mo_b_a_n_coordinator.html#92a0e36ffb244bc6ed6beaf98e986c05" title="The number of nodes in the this WBAN.">numNodes</a>; ++i) {
<a name="l00294"></a>00294                 absolutePosition = tPos + <a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#6cce5bfb2a17e71e346d7fd699139820" title="Returns the relative position of a node in this posture.">getPs</a>(i)
<a name="l00295"></a>00295                                 + <a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#3b0ae5a46b6e562838f968cd1bb06b91" title="Returns the singular movement radius of a node in this posture.">getRadius</a>(i);
<a name="l00296"></a>00296                 <span class="keywordflow">if</span> (!absolutePosition.isInBoundary(Coord(0, 0, 0), <a class="code" href="class_mo_b_a_n_coordinator.html#19061b8cb8295d5afce5e95bb1c8ea99" title="Pointer to the BaseWorldUtility.">world</a>-&gt;getPgs()))
<a name="l00297"></a>00297                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00298"></a>00298         }
<a name="l00299"></a>00299 
<a name="l00300"></a>00300         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00301"></a>00301 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b69a463af831ecb1c87daa61c09c9509"></a><!-- doxytag: member="MoBANCoordinator::mainProcess" ref="b69a463af831ecb1c87daa61c09c9509" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MoBANCoordinator::mainProcess           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The main process of the MoBAN mobility model. 
<p>
The main process of the MoBAN mobility model. To be called whenever a destination is reached or the duration of the previous posture expires. It select the behavior of the next movement (the posture and the destination), and prepare the required variables to make the movement. In the case of using a logged mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>, the new posture and other parameters are obtained from the <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>. 
<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00139">139</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00139"></a>00139                                    {
<a name="l00140"></a>00140         <span class="comment">//select the new posture and set the variable currentPosture as well as the reference points of all nodes within the WBAN.</span>
<a name="l00141"></a>00141         <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#6f67cb3412735ec31734d8a345688e5b" title="Variable that shows if reusing previously logged mobility pattern is requested. The...">useMobilityPattern</a>) {
<a name="l00142"></a>00142                 <a class="code" href="class_mo_b_a_n_coordinator.html#eff87bd9af8cb9aa14eada4b73ec4fbe" title="The index of the currently applied mobility pattern from.">currentPattern</a> = (<a class="code" href="class_mo_b_a_n_coordinator.html#eff87bd9af8cb9aa14eada4b73ec4fbe" title="The index of the currently applied mobility pattern from.">currentPattern</a> + 1) % <a class="code" href="class_mo_b_a_n_coordinator.html#00cbcb40ee4039ffd5723ffa4334d88f" title="The number of mobility pattern instances which has been read from the input file...">patternLength</a>;
<a name="l00143"></a>00143                 <span class="keywordtype">int</span> postureID = <a class="code" href="class_mo_b_a_n_coordinator.html#e19a9a2dce220a75c4757381b5f348a7" title="The mobility pattern data base.">mobilityPattern</a>[<a class="code" href="class_mo_b_a_n_coordinator.html#eff87bd9af8cb9aa14eada4b73ec4fbe" title="The index of the currently applied mobility pattern from.">currentPattern</a>].<a class="code" href="struct_mo_b_a_n_coordinator_1_1pattern.html#59e286ef1ae546090710cfcd2c432c9b">postureID</a>;
<a name="l00144"></a>00144                 <a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[postureID];
<a name="l00145"></a>00145         } <span class="keywordflow">else</span>
<a name="l00146"></a>00146                 <a class="code" href="class_mo_b_a_n_coordinator.html#b622d4b167d9d5dbc7529969a6688597" title="Function to select the next posture considering the current posture and the Markov...">selectPosture</a>();
<a name="l00147"></a>00147 
<a name="l00148"></a>00148         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt;<span class="stringliteral">"New posture is selected:"</span>&lt;&lt;<a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#40dc6d7007b14e779420da389e927aec" title="Returns posture name.">getPostureName</a>() &lt;&lt; endl;
<a name="l00149"></a>00149 
<a name="l00150"></a>00150         <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#7057d6de18f8fd8d646e0d370ab8c2a5" title="Check if this posture is mobile by checking the maximum possible speed.">isMobile</a>())
<a name="l00151"></a>00151         {
<a name="l00152"></a>00152                 <span class="keywordtype">double</span> distance;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154                 <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#6f67cb3412735ec31734d8a345688e5b" title="Variable that shows if reusing previously logged mobility pattern is requested. The...">useMobilityPattern</a>) {
<a name="l00155"></a>00155                         <a class="code" href="class_mo_b_a_n_coordinator.html#56143810b39a6031abe1cc59a18136c3" title="Selected destination for the ongoing move of the logical center.">targetPos</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#e19a9a2dce220a75c4757381b5f348a7" title="The mobility pattern data base.">mobilityPattern</a>[<a class="code" href="class_mo_b_a_n_coordinator.html#eff87bd9af8cb9aa14eada4b73ec4fbe" title="The index of the currently applied mobility pattern from.">currentPattern</a>].<a class="code" href="struct_mo_b_a_n_coordinator_1_1pattern.html#68ade906cd2a8e99513cd8f34e41e06a">targetPos</a>;
<a name="l00156"></a>00156                         <a class="code" href="class_mo_b_a_n_coordinator.html#fdfb553fa2576a3e72a6111b12f14a97" title="Currently selected speed for the mobile posture.">speed</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#e19a9a2dce220a75c4757381b5f348a7" title="The mobility pattern data base.">mobilityPattern</a>[<a class="code" href="class_mo_b_a_n_coordinator.html#eff87bd9af8cb9aa14eada4b73ec4fbe" title="The index of the currently applied mobility pattern from.">currentPattern</a>].<a class="code" href="struct_mo_b_a_n_coordinator_1_1pattern.html#6956bfc4ee8b53dcc0d13e9a46f4bf96">speed</a>;
<a name="l00157"></a>00157                 }
<a name="l00158"></a>00158                 <span class="keywordflow">else</span> {
<a name="l00159"></a>00159                         <a class="code" href="class_mo_b_a_n_coordinator.html#56143810b39a6031abe1cc59a18136c3" title="Selected destination for the ongoing move of the logical center.">targetPos</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#debee0a447b7e85d444054fa3a4ee013" title="Function to select the destination in the case of a mobile posture.">selectDestination</a>();
<a name="l00160"></a>00160                         <a class="code" href="class_mo_b_a_n_coordinator.html#fdfb553fa2576a3e72a6111b12f14a97" title="Currently selected speed for the mobile posture.">speed</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#6d83b8c03d91b0fee3e335b214f51b4c" title="Select a velocity value within the given velocity range.">selectSpeed</a>();
<a name="l00161"></a>00161                 }
<a name="l00162"></a>00162 
<a name="l00163"></a>00163                 <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#fdfb553fa2576a3e72a6111b12f14a97" title="Currently selected speed for the mobile posture.">speed</a>==0)
<a name="l00164"></a>00164                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"The velocity in a mobile posture should not be zero!"</span>);
<a name="l00165"></a>00165 
<a name="l00166"></a>00166                 distance = <a class="code" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b" title="Current position of the logical center of the group.">logicalCenter</a>.distance(<a class="code" href="class_mo_b_a_n_coordinator.html#56143810b39a6031abe1cc59a18136c3" title="Selected destination for the ongoing move of the logical center.">targetPos</a>);
<a name="l00167"></a>00167                 <a class="code" href="class_mo_b_a_n_coordinator.html#e65c511653f346fbb079389ab23b62cf" title="The selected duration of the current posture.">duration</a> = distance / <a class="code" href="class_mo_b_a_n_coordinator.html#fdfb553fa2576a3e72a6111b12f14a97" title="Currently selected speed for the mobile posture.">speed</a>;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169                 <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#e65c511653f346fbb079389ab23b62cf" title="The selected duration of the current posture.">duration</a> &gt;= <a class="code" href="class_mo_b_a_n_coordinator.html#4b679462d1e5489af4b5a5480f22fdaa" title="Interval for updating the move (NED parameter).">updateInterval</a>)
<a name="l00170"></a>00170                         <a class="code" href="class_mo_b_a_n_coordinator.html#f177cb826e1fec16faf7c7cbd0390cf5" title="Total number of steps of the current move or current posture.">numSteps</a> = FWMath::round(<a class="code" href="class_mo_b_a_n_coordinator.html#e65c511653f346fbb079389ab23b62cf" title="The selected duration of the current posture.">duration</a> / <a class="code" href="class_mo_b_a_n_coordinator.html#4b679462d1e5489af4b5a5480f22fdaa" title="Interval for updating the move (NED parameter).">updateInterval</a>);
<a name="l00171"></a>00171                 <span class="keywordflow">else</span>
<a name="l00172"></a>00172                         <a class="code" href="class_mo_b_a_n_coordinator.html#f177cb826e1fec16faf7c7cbd0390cf5" title="Total number of steps of the current move or current posture.">numSteps</a> = 1; <span class="comment">//The selected target position is quite close so that in less than one step, it will be reached with the given velocity.</span>
<a name="l00173"></a>00173 
<a name="l00174"></a>00174                 <a class="code" href="class_mo_b_a_n_coordinator.html#56735487e55a96bd1294af15883f2d9c" title="The size of the current move step.">stepSize</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#56143810b39a6031abe1cc59a18136c3" title="Selected destination for the ongoing move of the logical center.">targetPos</a> - <a class="code" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b" title="Current position of the logical center of the group.">logicalCenter</a>;
<a name="l00175"></a>00175                 <a class="code" href="class_mo_b_a_n_coordinator.html#56735487e55a96bd1294af15883f2d9c" title="The size of the current move step.">stepSize</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#56735487e55a96bd1294af15883f2d9c" title="The size of the current move step.">stepSize</a> / <a class="code" href="class_mo_b_a_n_coordinator.html#f177cb826e1fec16faf7c7cbd0390cf5" title="Total number of steps of the current move or current posture.">numSteps</a>;
<a name="l00176"></a>00176                 <a class="code" href="class_mo_b_a_n_coordinator.html#25c1728a5480570b4b8fe51b4a4a5f02" title="The intermediate target of the current move step.">stepTarget</a> = logicalCenter + <a class="code" href="class_mo_b_a_n_coordinator.html#56735487e55a96bd1294af15883f2d9c" title="The size of the current move step.">stepSize</a>;
<a name="l00177"></a>00177         }
<a name="l00178"></a>00178         <span class="keywordflow">else</span>
<a name="l00179"></a>00179         {
<a name="l00180"></a>00180                 <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#6f67cb3412735ec31734d8a345688e5b" title="Variable that shows if reusing previously logged mobility pattern is requested. The...">useMobilityPattern</a>)
<a name="l00181"></a>00181                         <a class="code" href="class_mo_b_a_n_coordinator.html#e65c511653f346fbb079389ab23b62cf" title="The selected duration of the current posture.">duration</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#e19a9a2dce220a75c4757381b5f348a7" title="The mobility pattern data base.">mobilityPattern</a>[<a class="code" href="class_mo_b_a_n_coordinator.html#eff87bd9af8cb9aa14eada4b73ec4fbe" title="The index of the currently applied mobility pattern from.">currentPattern</a>].<a class="code" href="struct_mo_b_a_n_coordinator_1_1pattern.html#c46502075e05cb35bf6e62d3bc508969">duration</a>;
<a name="l00182"></a>00182                 <span class="keywordflow">else</span>
<a name="l00183"></a>00183                         <a class="code" href="class_mo_b_a_n_coordinator.html#e65c511653f346fbb079389ab23b62cf" title="The selected duration of the current posture.">duration</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#b4f9d86a51c84b083817db1fcbe9dbab" title="Select a stay time duration in the specified range for the new posture.">selectDuration</a>();
<a name="l00184"></a>00184 
<a name="l00185"></a>00185                 <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#e65c511653f346fbb079389ab23b62cf" title="The selected duration of the current posture.">duration</a> &lt; <a class="code" href="class_mo_b_a_n_coordinator.html#4b679462d1e5489af4b5a5480f22fdaa" title="Interval for updating the move (NED parameter).">updateInterval</a>)
<a name="l00186"></a>00186                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"The duration of a posture should be bigger than the updateInterval value!"</span>);
<a name="l00187"></a>00187 
<a name="l00188"></a>00188                 <a class="code" href="class_mo_b_a_n_coordinator.html#f177cb826e1fec16faf7c7cbd0390cf5" title="Total number of steps of the current move or current posture.">numSteps</a> = FWMath::round(<a class="code" href="class_mo_b_a_n_coordinator.html#e65c511653f346fbb079389ab23b62cf" title="The selected duration of the current posture.">duration</a> / <a class="code" href="class_mo_b_a_n_coordinator.html#4b679462d1e5489af4b5a5480f22fdaa" title="Interval for updating the move (NED parameter).">updateInterval</a>) ;
<a name="l00189"></a>00189         }
<a name="l00190"></a>00190         <a class="code" href="class_mo_b_a_n_coordinator.html#c1a5ee7eeedb62fdfcee79fb6234f762" title="Number of steps already moved.">step</a> = 0;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192     <span class="comment">//show posture name in the graphical interface</span>
<a name="l00193"></a>00193         <span class="keywordflow">if</span>(<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#gd68b7777ea70ef452e0aadb4ea2df455">ev</a>.isGUI()){
<a name="l00194"></a>00194                 <span class="keywordtype">char</span> dis_str[100];
<a name="l00195"></a>00195                 sprintf(dis_str,<span class="stringliteral">"p=%f,50;i=block/wheelbarrow;is=vs;t=%s Duration:%f"</span>,<a class="code" href="class_mo_b_a_n_coordinator.html#19061b8cb8295d5afce5e95bb1c8ea99" title="Pointer to the BaseWorldUtility.">world</a>-&gt;getPgs()-&gt;getX()+10+(<a class="code" href="class_mo_b_a_n_coordinator.html#5320bb16f51acc82b6419911a280e11d" title="Index of this WBAN.">index</a>*30),<a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#40dc6d7007b14e779420da389e927aec" title="Returns posture name.">getPostureName</a>(),<a class="code" href="class_mo_b_a_n_coordinator.html#e65c511653f346fbb079389ab23b62cf" title="The selected duration of the current posture.">duration</a>.dbl());
<a name="l00196"></a>00196                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#a93ee7c9ef7a94d4023a4136a1863462">setDisplayString</a>(dis_str);
<a name="l00197"></a>00197         }
<a name="l00198"></a>00198 
<a name="l00199"></a>00199     <span class="comment">// write the move step into the output log file</span>
<a name="l00200"></a>00200         <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#7057d6de18f8fd8d646e0d370ab8c2a5" title="Check if this posture is mobile by checking the maximum possible speed.">isMobile</a>())
<a name="l00201"></a>00201                 fprintf(<a class="code" href="class_mo_b_a_n_coordinator.html#bb700aed062784b7cb21eec3e146c80d" title="Pointer to the file for logging MoBAN mobility pattern for future use.">logfile</a>,<span class="stringliteral">"%s %d %f %f %f %f \n"</span>,<a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#40dc6d7007b14e779420da389e927aec" title="Returns posture name.">getPostureName</a>(),<a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#217bc7334d61b9441c06affd81798445" title="Returns the unique Id (index) of this posture.">getPostureID</a>(), <a class="code" href="class_mo_b_a_n_coordinator.html#56143810b39a6031abe1cc59a18136c3" title="Selected destination for the ongoing move of the logical center.">targetPos</a>.getX(),<a class="code" href="class_mo_b_a_n_coordinator.html#56143810b39a6031abe1cc59a18136c3" title="Selected destination for the ongoing move of the logical center.">targetPos</a>.getY(),<a class="code" href="class_mo_b_a_n_coordinator.html#56143810b39a6031abe1cc59a18136c3" title="Selected destination for the ongoing move of the logical center.">targetPos</a>.getZ(),<a class="code" href="class_mo_b_a_n_coordinator.html#fdfb553fa2576a3e72a6111b12f14a97" title="Currently selected speed for the mobile posture.">speed</a>);
<a name="l00202"></a>00202         <span class="keywordflow">else</span>
<a name="l00203"></a>00203                 fprintf(<a class="code" href="class_mo_b_a_n_coordinator.html#bb700aed062784b7cb21eec3e146c80d" title="Pointer to the file for logging MoBAN mobility pattern for future use.">logfile</a>,<span class="stringliteral">"%s %d %f \n"</span>,<a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#40dc6d7007b14e779420da389e927aec" title="Returns posture name.">getPostureName</a>(),<a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#217bc7334d61b9441c06affd81798445" title="Returns the unique Id (index) of this posture.">getPostureID</a>(), <a class="code" href="class_mo_b_a_n_coordinator.html#e65c511653f346fbb079389ab23b62cf" title="The selected duration of the current posture.">duration</a>.dbl());
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 
<a name="l00206"></a>00206         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"New posture : "</span> &lt;&lt; <a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#40dc6d7007b14e779420da389e927aec" title="Returns posture name.">getPostureName</a>() &lt;&lt; endl;
<a name="l00207"></a>00207         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"Destination:"</span> &lt;&lt; <a class="code" href="class_mo_b_a_n_coordinator.html#56143810b39a6031abe1cc59a18136c3" title="Selected destination for the ongoing move of the logical center.">targetPos</a>.info() &lt;&lt; <span class="stringliteral">" Total Time="</span> &lt;&lt; <a class="code" href="class_mo_b_a_n_coordinator.html#e65c511653f346fbb079389ab23b62cf" title="The selected duration of the current posture.">duration</a> &lt;&lt; endl;
<a name="l00208"></a>00208 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7e5b78357b30b23f2f8285dcde5c6dd9"></a><!-- doxytag: member="MoBANCoordinator::publishToNodes" ref="7e5b78357b30b23f2f8285dcde5c6dd9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MoBANCoordinator::publishToNodes           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Publishes the reference point and other information of the posture to the blackboard of the belonging nodes. 
<p>
Publishes the reference point and other information of the posture to the blackboard of the belonging nodes. 
<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00316">316</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00316"></a>00316                                       {
<a name="l00317"></a>00317         <a class="code" href="class_b_b_mo_b_a_n_message.html">BBMoBANMessage</a> Refmove;
<a name="l00318"></a>00318         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_mo_b_a_n_coordinator.html#92a0e36ffb244bc6ed6beaf98e986c05" title="The number of nodes in the this WBAN.">numNodes</a>; ++i) {
<a name="l00319"></a>00319                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt; <span class="stringliteral">"Publish data for node:"</span> &lt;&lt; <a class="code" href="class_mo_b_a_n_coordinator.html#2066591b0b290550ee350b5a57c0c700" title="the index list of nodes belong to this WBAN">nodeIndex</a>[i] &lt;&lt; endl;
<a name="l00320"></a>00320 
<a name="l00321"></a>00321                 Refmove.<a class="code" href="class_b_b_mo_b_a_n_message.html#8b731c314b2e26ca27113f5d2163d704">position</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#6cce5bfb2a17e71e346d7fd699139820" title="Returns the relative position of a node in this posture.">getPs</a>(i) + <a class="code" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b" title="Current position of the logical center of the group.">logicalCenter</a>;
<a name="l00322"></a>00322                 Refmove.<a class="code" href="class_b_b_mo_b_a_n_message.html#d198b298e84b04cebaf36f5b7170ec4e">radius</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#3b0ae5a46b6e562838f968cd1bb06b91" title="Returns the singular movement radius of a node in this posture.">getRadius</a>(i);
<a name="l00323"></a>00323                 Refmove.<a class="code" href="class_b_b_mo_b_a_n_message.html#74bd985cd3d8bed6e4119471b5ab6b1d">speed</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#d29284231df7d01bf47f1aaaad192103" title="Returns the singular movement speed of a node in this posture.">getSpeed</a>(i);
<a name="l00324"></a>00324 
<a name="l00325"></a>00325                 <a class="code" href="class_mo_b_a_n_coordinator.html#5350548b74b23200b0ba382f157d334b" title="Pointer to the BaseUtility.">utility</a> = FindModule&lt;BaseUtility*&gt;::findSubModule(<a class="code" href="class_mo_b_a_n_coordinator.html#7ad23bfc4185e34e462e2b06d349a78f" title="Pointer to the top level (network).">network</a>-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcModule.html#99f25de7d151adbe802c9b8811ee8e5b">getSubmodule</a>(<span class="stringliteral">"node"</span>,<a class="code" href="class_mo_b_a_n_coordinator.html#2066591b0b290550ee350b5a57c0c700" title="the index list of nodes belong to this WBAN">nodeIndex</a>[i]));
<a name="l00326"></a>00326                         <a class="code" href="class_mo_b_a_n_coordinator.html#5350548b74b23200b0ba382f157d334b" title="Pointer to the BaseUtility.">utility</a>-&gt;publishBBItem(<a class="code" href="class_mo_b_a_n_coordinator.html#5350548b74b23200b0ba382f157d334b" title="Pointer to the BaseUtility.">utility</a>-&gt;getCategory(&amp;Refmove), &amp;Refmove, <a class="code" href="class_mo_b_a_n_coordinator.html#7ad23bfc4185e34e462e2b06d349a78f" title="Pointer to the top level (network).">network</a>-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcModule.html#99f25de7d151adbe802c9b8811ee8e5b">getSubmodule</a>(<span class="stringliteral">"node"</span>,<a class="code" href="class_mo_b_a_n_coordinator.html#2066591b0b290550ee350b5a57c0c700" title="the index list of nodes belong to this WBAN">nodeIndex</a>[i])-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcModule.html#592b754c94045c707e4f5155f00c18f2">getId</a>());
<a name="l00327"></a>00327 
<a name="l00328"></a>00328                 }
<a name="l00329"></a>00329         }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="138ebd67882d6cf1154126f47d35d49c"></a><!-- doxytag: member="MoBANCoordinator::readConfigurationFile" ref="138ebd67882d6cf1154126f47d35d49c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MoBANCoordinator::readConfigurationFile           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reads the input configuration file. 
<p>
Function to read the configuration file which includes the information for configuring and tuning the model for a specific application scenario. The configuration file can provide the Markov model transition matrices, different area types and time domains, and the proper matrix for each time-space combination. However, these are all optional and will b e given just in the case that the space-time correlation are required to be simulated. The function will be called in the initialization phase. 
<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00483">483</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00483"></a>00483                                              {
<a name="l00484"></a>00484         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html">cXMLElement</a>* xmlConfig = <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#73111b3f286cc723519595a4d8d318f7">par</a>(<span class="stringliteral">"configFile"</span>).<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcPar.html#bc642480c56e9b5717e2c2a11d908ee3">xmlValue</a>();
<a name="l00485"></a>00485         <span class="keywordflow">if</span> (xmlConfig == 0)
<a name="l00486"></a>00486                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00487"></a>00487 
<a name="l00488"></a>00488         cXMLElementList tagList;
<a name="l00489"></a>00489         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html">cXMLElement</a>* tempTag;
<a name="l00490"></a>00490         <span class="keyword">const</span> <span class="keywordtype">char</span>* str;
<a name="l00491"></a>00491         std::string sstr; <span class="comment">//for easier comparison</span>
<a name="l00492"></a>00492 
<a name="l00493"></a>00493         <span class="comment">/* Reading the initial posture if it is given*/</span>
<a name="l00494"></a>00494         <span class="keywordtype">int</span> postureID;
<a name="l00495"></a>00495         tagList = xmlConfig-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#c497a6b66b7f49c6741ad4e5368b28ec">getElementsByTagName</a>(<span class="stringliteral">"initialPosture"</span>);
<a name="l00496"></a>00496 
<a name="l00497"></a>00497         <span class="keywordflow">if</span> (tagList.empty())
<a name="l00498"></a>00498                 postureID = 0; <span class="comment">// no initial posture has been specified. The first one is selected!</span>
<a name="l00499"></a>00499         <span class="keywordflow">else</span> {
<a name="l00500"></a>00500                 tempTag = tagList.front();
<a name="l00501"></a>00501                 str = tempTag-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#3ad740721da561cb7dab07cbd96d6e8b">getAttribute</a>(<span class="stringliteral">"postureID"</span>);
<a name="l00502"></a>00502                 postureID = strtol(str, 0, 0);
<a name="l00503"></a>00503         }
<a name="l00504"></a>00504         <a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[postureID];
<a name="l00505"></a>00505         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt; <span class="stringliteral">"Initial Posture:"</span>&lt;&lt; postureID &lt;&lt;endl;
<a name="l00506"></a>00506 
<a name="l00507"></a>00507 
<a name="l00508"></a>00508         <span class="comment">/* Reading the initial position of the logical center if it is given */</span>
<a name="l00509"></a>00509         tagList = xmlConfig-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#c497a6b66b7f49c6741ad4e5368b28ec">getElementsByTagName</a>(<span class="stringliteral">"initialLocation"</span>);
<a name="l00510"></a>00510         <span class="keywordflow">if</span>(tagList.empty())
<a name="l00511"></a>00511                 <a class="code" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b" title="Current position of the logical center of the group.">logicalCenter</a>=Coord(10,10,5); <span class="comment">// no initial location has been specified .</span>
<a name="l00512"></a>00512         <span class="keywordflow">else</span>
<a name="l00513"></a>00513         {
<a name="l00514"></a>00514                 <span class="keywordtype">double</span> x,y,z;
<a name="l00515"></a>00515                 tempTag= tagList.front();
<a name="l00516"></a>00516 
<a name="l00517"></a>00517                 str = tempTag-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#3ad740721da561cb7dab07cbd96d6e8b">getAttribute</a>(<span class="stringliteral">"x"</span>); x = strtod(str, 0);
<a name="l00518"></a>00518                 str = tempTag-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#3ad740721da561cb7dab07cbd96d6e8b">getAttribute</a>(<span class="stringliteral">"y"</span>); y = strtod(str, 0);
<a name="l00519"></a>00519                 str = tempTag-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#3ad740721da561cb7dab07cbd96d6e8b">getAttribute</a>(<span class="stringliteral">"z"</span>); z = strtod(str, 0);
<a name="l00520"></a>00520                 <a class="code" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b" title="Current position of the logical center of the group.">logicalCenter</a> = Coord(x,y,z);
<a name="l00521"></a>00521         }
<a name="l00522"></a>00522         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"Initial position of the LC:"</span>&lt;&lt; <a class="code" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b" title="Current position of the logical center of the group.">logicalCenter</a>.info() &lt;&lt;endl;
<a name="l00523"></a>00523 
<a name="l00524"></a>00524         <span class="comment">/* Reading the given range for duration of stable postures */</span>
<a name="l00525"></a>00525         tagList = xmlConfig-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#c497a6b66b7f49c6741ad4e5368b28ec">getElementsByTagName</a>(<span class="stringliteral">"durationRange"</span>);
<a name="l00526"></a>00526         <span class="keywordflow">if</span>(tagList.empty())
<a name="l00527"></a>00527         {
<a name="l00528"></a>00528                 <span class="comment">// no duration is specified. We assign a value!</span>
<a name="l00529"></a>00529                 <a class="code" href="class_mo_b_a_n_coordinator.html#ac48e46d43458a8f960cc33e84ac85e8" title="The minimum value of the duration for stable postures.">minDuration</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#4b679462d1e5489af4b5a5480f22fdaa" title="Interval for updating the move (NED parameter).">updateInterval</a>;
<a name="l00530"></a>00530                 <a class="code" href="class_mo_b_a_n_coordinator.html#02c4e8d23a6b0b2e1a1d94abe1974b9f" title="The maximum value of the duration for stable postures.">maxDuration</a> = 100;
<a name="l00531"></a>00531         }
<a name="l00532"></a>00532         <span class="keywordflow">else</span>
<a name="l00533"></a>00533         {
<a name="l00534"></a>00534                 <span class="keywordtype">double</span> min,max;
<a name="l00535"></a>00535                 tempTag= tagList.front();
<a name="l00536"></a>00536 
<a name="l00537"></a>00537                 str = tempTag-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#3ad740721da561cb7dab07cbd96d6e8b">getAttribute</a>(<span class="stringliteral">"min"</span>); min = strtod(str, 0);
<a name="l00538"></a>00538                 str = tempTag-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#3ad740721da561cb7dab07cbd96d6e8b">getAttribute</a>(<span class="stringliteral">"max"</span>); max = strtod(str, 0);
<a name="l00539"></a>00539 
<a name="l00540"></a>00540                 <a class="code" href="class_mo_b_a_n_coordinator.html#ac48e46d43458a8f960cc33e84ac85e8" title="The minimum value of the duration for stable postures.">minDuration</a> = FWMath::max(<a class="code" href="class_mo_b_a_n_coordinator.html#4b679462d1e5489af4b5a5480f22fdaa" title="Interval for updating the move (NED parameter).">updateInterval</a>.dbl(),min); <span class="comment">// the minimum should be bigger than the update interval.</span>
<a name="l00541"></a>00541                 <a class="code" href="class_mo_b_a_n_coordinator.html#02c4e8d23a6b0b2e1a1d94abe1974b9f" title="The maximum value of the duration for stable postures.">maxDuration</a> = FWMath::max(min,max);
<a name="l00542"></a>00542         }
<a name="l00543"></a>00543         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"Posture duration range: ("</span>&lt;&lt; <a class="code" href="class_mo_b_a_n_coordinator.html#ac48e46d43458a8f960cc33e84ac85e8" title="The minimum value of the duration for stable postures.">minDuration</a> &lt;&lt; <span class="stringliteral">" , "</span> &lt;&lt; <a class="code" href="class_mo_b_a_n_coordinator.html#02c4e8d23a6b0b2e1a1d94abe1974b9f" title="The maximum value of the duration for stable postures.">maxDuration</a> &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; endl;
<a name="l00544"></a>00544 
<a name="l00545"></a>00545 
<a name="l00546"></a>00546         <a class="code" href="class_mo_b_a_n_coordinator.html#51f9fc44b5168e7ef6e58fd221bf3f0a" title="Class for performing operation for spatial and temporal correlations in posture selection...">transitions</a> = <span class="keyword">new</span> <a class="code" href="class_posture_transition.html" title="Class to provide spatial and temporal correlation in the posture selection process...">PostureTransition</a>(<a class="code" href="class_mo_b_a_n_coordinator.html#3880f0e3e0e489b1edd2692a441b903f" title="Number of predefined postures.">numPostures</a>);
<a name="l00547"></a>00547 
<a name="l00548"></a>00548 
<a name="l00549"></a>00549         <span class="comment">/* Reading the Markov transition matrices, if there are any. */</span>
<a name="l00550"></a>00550         tagList = xmlConfig-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#c497a6b66b7f49c6741ad4e5368b28ec">getElementsByTagName</a>(<span class="stringliteral">"markovMatrices"</span>);
<a name="l00551"></a>00551 
<a name="l00552"></a>00552         <span class="keywordflow">if</span>(tagList.empty())
<a name="l00553"></a>00553         {
<a name="l00554"></a>00554                 <a class="code" href="class_mo_b_a_n_coordinator.html#626ad8d08de1e3d7fad2c8032f199933" title="The requested strategy for posture selection. To be given through configuration file...">postureSelStrategy</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb9357a18191c1994fee0d7b81c953ff015d">UNIFORM_RANDOM</a>; <span class="comment">// no posture selection strategy is required. uniform random is applied</span>
<a name="l00555"></a>00555                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"Posture Selection strategy: UNIFORM_RANDOM "</span>&lt;&lt; endl;
<a name="l00556"></a>00556                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00557"></a>00557         }
<a name="l00558"></a>00558 
<a name="l00559"></a>00559         tempTag = tagList.front();
<a name="l00560"></a>00560 
<a name="l00561"></a>00561         cXMLElementList matrixList;
<a name="l00562"></a>00562         matrixList = tempTag-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#c497a6b66b7f49c6741ad4e5368b28ec">getElementsByTagName</a>(<span class="stringliteral">"MarkovMatrix"</span>);
<a name="l00563"></a>00563 
<a name="l00564"></a>00564         <span class="keywordflow">if</span>(tagList.empty())
<a name="l00565"></a>00565         {
<a name="l00566"></a>00566                 <a class="code" href="class_mo_b_a_n_coordinator.html#626ad8d08de1e3d7fad2c8032f199933" title="The requested strategy for posture selection. To be given through configuration file...">postureSelStrategy</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb9357a18191c1994fee0d7b81c953ff015d">UNIFORM_RANDOM</a>; <span class="comment">// no posture selection strategy is required. uniform random is applied</span>
<a name="l00567"></a>00567                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"Posture Selection strategy: UNIFORM_RANDOM "</span>&lt;&lt; endl;
<a name="l00568"></a>00568                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00569"></a>00569         }
<a name="l00570"></a>00570 
<a name="l00571"></a>00571         <a class="code" href="class_mo_b_a_n_coordinator.html#626ad8d08de1e3d7fad2c8032f199933" title="The requested strategy for posture selection. To be given through configuration file...">postureSelStrategy</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb936f0a336baf0f4a679087d3198a9582a1">MARKOV_BASE</a>;
<a name="l00572"></a>00572 
<a name="l00573"></a>00573         <span class="comment">// make an empty matrix for the Markov Chain</span>
<a name="l00574"></a>00574     <span class="keywordtype">double</span>** matrix = <span class="keyword">new</span> <span class="keywordtype">double</span>* [<a class="code" href="class_mo_b_a_n_coordinator.html#3880f0e3e0e489b1edd2692a441b903f" title="Number of predefined postures.">numPostures</a>];
<a name="l00575"></a>00575         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="class_mo_b_a_n_coordinator.html#3880f0e3e0e489b1edd2692a441b903f" title="Number of predefined postures.">numPostures</a>;++i)
<a name="l00576"></a>00576                 matrix[i] = <span class="keyword">new</span> <span class="keywordtype">double</span> [numPostures];
<a name="l00577"></a>00577 
<a name="l00578"></a>00578         <span class="keywordtype">bool</span> setDefault=<span class="keyword">false</span>; <span class="comment">// variable to remember if the default matrix is defined.</span>
<a name="l00579"></a>00579         cXMLElementList::const_iterator matrixTag;
<a name="l00580"></a>00580         <span class="keywordflow">for</span>(matrixTag = matrixList.begin(); matrixTag != matrixList.end(); matrixTag++)
<a name="l00581"></a>00581         {
<a name="l00582"></a>00582 
<a name="l00583"></a>00583                 cXMLElementList rowList;
<a name="l00584"></a>00584                 cXMLElementList cellList;
<a name="l00585"></a>00585                 <span class="keywordtype">int</span> i=0,j=0;
<a name="l00586"></a>00586                 <span class="keywordtype">bool</span> thisDefault = <span class="keyword">false</span>;
<a name="l00587"></a>00587 
<a name="l00588"></a>00588                 <span class="keywordflow">if</span> ( (*matrixTag)-&gt;getAttribute(<span class="stringliteral">"type"</span>) != NULL)
<a name="l00589"></a>00589                 {
<a name="l00590"></a>00590                         sstr = (*matrixTag)-&gt;getAttribute(<span class="stringliteral">"type"</span>);
<a name="l00591"></a>00591                         <span class="keywordflow">if</span> ( sstr == <span class="stringliteral">"Default"</span> || sstr == <span class="stringliteral">"default"</span> )
<a name="l00592"></a>00592                         {
<a name="l00593"></a>00593                                 <span class="keywordflow">if</span> (setDefault)
<a name="l00594"></a>00594                                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a> (<span class="stringliteral">"There are more than one default matrix defined in the configuration file!"</span>);
<a name="l00595"></a>00595                                 <span class="keywordflow">else</span>
<a name="l00596"></a>00596                                         {setDefault = <span class="keyword">true</span>; thisDefault = <span class="keyword">true</span>;}
<a name="l00597"></a>00597                         }
<a name="l00598"></a>00598                 }
<a name="l00599"></a>00599 
<a name="l00600"></a>00600 
<a name="l00601"></a>00601                 sstr = (*matrixTag)-&gt;getAttribute(<span class="stringliteral">"name"</span>);
<a name="l00602"></a>00602 
<a name="l00603"></a>00603                 rowList = (*matrixTag)-&gt;getElementsByTagName(<span class="stringliteral">"row"</span>);
<a name="l00604"></a>00604                 <span class="keywordflow">if</span> (rowList.size()!= numPostures &amp;&amp; rowList.size()!= 1)
<a name="l00605"></a>00605                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"Number of rows in  the Markov transition matrix should be equal to either the number"</span>
<a name="l00606"></a>00606                                         <span class="stringliteral">" of postures (full Markov matrix) or one (steady state vector)."</span>);
<a name="l00607"></a>00607 
<a name="l00608"></a>00608                 <span class="keywordflow">if</span> (rowList.size()!= numPostures &amp;&amp; thisDefault )
<a name="l00609"></a>00609                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"Dimension of the default Markov matrix should be equal to the number of postures in the configuration file."</span>);
<a name="l00610"></a>00610 
<a name="l00611"></a>00611                 <span class="keywordflow">if</span> ( (rowList.size()== 1) &amp;&amp; (!setDefault) )
<a name="l00612"></a>00612                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"A default matrix is supposed to be defined before a steady state can be defined in the configuration file."</span>);
<a name="l00613"></a>00613 
<a name="l00614"></a>00614                 <span class="keywordflow">for</span>(cXMLElementList::const_iterator row = rowList.begin(); row != rowList.end(); row++)
<a name="l00615"></a>00615                 {
<a name="l00616"></a>00616                         cellList = (*row)-&gt;getElementsByTagName(<span class="stringliteral">"cell"</span>);
<a name="l00617"></a>00617                         <span class="keywordflow">if</span> (cellList.size()!= numPostures)
<a name="l00618"></a>00618                                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"Number of columns in  the Markov transition matrix should be equal to the number of postures."</span>);
<a name="l00619"></a>00619 
<a name="l00620"></a>00620                         j=0;
<a name="l00621"></a>00621                         <span class="keywordflow">for</span>(cXMLElementList::const_iterator cell = cellList.begin(); cell != cellList.end(); cell++)
<a name="l00622"></a>00622                         {
<a name="l00623"></a>00623                                 str = (*cell)-&gt;getAttribute(<span class="stringliteral">"value"</span>);
<a name="l00624"></a>00624                                 matrix[i][j] = strtod(str, 0);
<a name="l00625"></a>00625                                 j++;
<a name="l00626"></a>00626                         }
<a name="l00627"></a>00627 
<a name="l00628"></a>00628                         ++i;
<a name="l00629"></a>00629                 }
<a name="l00630"></a>00630 
<a name="l00631"></a>00631                 <span class="keywordflow">if</span> (rowList.size() == 1)
<a name="l00632"></a>00632                         <a class="code" href="class_mo_b_a_n_coordinator.html#51f9fc44b5168e7ef6e58fd221bf3f0a" title="Class for performing operation for spatial and temporal correlations in posture selection...">transitions</a>-&gt;<a class="code" href="class_posture_transition.html#c5c424a8372a3d6f39ccc06c88d4249f" title="Receives a steady state vector, extracts the corresponding transition matrix considering...">addSteadyState</a>(sstr, matrix[0]); <span class="comment">// steady state</span>
<a name="l00633"></a>00633                 <span class="keywordflow">else</span>
<a name="l00634"></a>00634                          <a class="code" href="class_mo_b_a_n_coordinator.html#51f9fc44b5168e7ef6e58fd221bf3f0a" title="Class for performing operation for spatial and temporal correlations in posture selection...">transitions</a>-&gt;<a class="code" href="class_posture_transition.html#10abfb612543bbc52f6a13a0e138d822" title="Adds two matrices with dimension numPos*numPose .">addMatrix</a>(sstr, matrix, thisDefault);             <span class="comment">// A full Markovian matrix</span>
<a name="l00635"></a>00635 
<a name="l00636"></a>00636                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"Markov transition matrix "</span>&lt;&lt; sstr &lt;&lt; <span class="stringliteral">" :"</span> &lt;&lt;endl;
<a name="l00637"></a>00637                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0;k &lt; i ; ++k)
<a name="l00638"></a>00638                 {
<a name="l00639"></a>00639                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=0; f&lt;numPostures ;++f)
<a name="l00640"></a>00640                                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; matrix[k][f]&lt;&lt;<span class="stringliteral">" "</span>;
<a name="l00641"></a>00641                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; endl;
<a name="l00642"></a>00642                 }
<a name="l00643"></a>00643 
<a name="l00644"></a>00644         }
<a name="l00645"></a>00645 
<a name="l00646"></a>00646         <span class="comment">/* Reading the Area types, if there are any. */</span>
<a name="l00647"></a>00647         tagList = xmlConfig-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#c497a6b66b7f49c6741ad4e5368b28ec">getElementsByTagName</a>(<span class="stringliteral">"areaTypes"</span>);
<a name="l00648"></a>00648 
<a name="l00649"></a>00649         <span class="keywordflow">if</span>( tagList.empty() )
<a name="l00650"></a>00650                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"No area type is given. So there is no spatial correlation in posture selection."</span> &lt;&lt; endl;
<a name="l00651"></a>00651         <span class="keywordflow">else</span>{
<a name="l00652"></a>00652 
<a name="l00653"></a>00653                         tempTag = tagList.front();
<a name="l00654"></a>00654                         cXMLElementList typeList = tempTag-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#c497a6b66b7f49c6741ad4e5368b28ec">getElementsByTagName</a>(<span class="stringliteral">"areaType"</span>);
<a name="l00655"></a>00655 
<a name="l00656"></a>00656                         <span class="keywordflow">if</span>( typeList.empty() )
<a name="l00657"></a>00657                                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a> (<span class="stringliteral">"No areaType has been defined in areaTypes!"</span>);
<a name="l00658"></a>00658 
<a name="l00659"></a>00659                         <span class="keywordflow">for</span>(cXMLElementList::const_iterator aType = typeList.begin(); aType != typeList.end(); aType++)
<a name="l00660"></a>00660                         {
<a name="l00661"></a>00661                                 sstr = (*aType)-&gt;getAttribute(<span class="stringliteral">"name"</span>);
<a name="l00662"></a>00662 
<a name="l00663"></a>00663                                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"Area type "</span> &lt;&lt; sstr &lt;&lt; <span class="stringliteral">" :"</span> &lt;&lt; endl;
<a name="l00664"></a>00664 
<a name="l00665"></a>00665                                 <span class="keywordtype">int</span> typeID = <a class="code" href="class_mo_b_a_n_coordinator.html#51f9fc44b5168e7ef6e58fd221bf3f0a" title="Class for performing operation for spatial and temporal correlations in posture selection...">transitions</a>-&gt;<a class="code" href="class_posture_transition.html#261ad915b2a9c7cdf7082660360190e4" title="Adds a area type to the list with the given name and returns the index of this area...">addAreaType</a>(sstr);
<a name="l00666"></a>00666 
<a name="l00667"></a>00667                                 cXMLElementList boundList = (*aType)-&gt;getElementsByTagName(<span class="stringliteral">"boundary"</span>);
<a name="l00668"></a>00668                                 <span class="keywordflow">if</span>( boundList.empty() )
<a name="l00669"></a>00669                                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a> (<span class="stringliteral">"No boundary is given for a area type!"</span>);
<a name="l00670"></a>00670 
<a name="l00671"></a>00671                                 Coord minBound, maxBound;
<a name="l00672"></a>00672                                 <span class="keywordflow">for</span>(cXMLElementList::const_iterator aBound = boundList.begin(); aBound != boundList.end(); aBound++)
<a name="l00673"></a>00673                                 {
<a name="l00674"></a>00674                                         str = (*aBound)-&gt;getAttribute(<span class="stringliteral">"xMin"</span>); minBound.setX(strtod(str, 0));
<a name="l00675"></a>00675                                         str = (*aBound)-&gt;getAttribute(<span class="stringliteral">"yMin"</span>); minBound.setY(strtod(str, 0));
<a name="l00676"></a>00676                                         str = (*aBound)-&gt;getAttribute(<span class="stringliteral">"zMin"</span>); minBound.setZ(strtod(str, 0));
<a name="l00677"></a>00677 
<a name="l00678"></a>00678                                         str = (*aBound)-&gt;getAttribute(<span class="stringliteral">"xMax"</span>); maxBound.setX(strtod(str, 0));
<a name="l00679"></a>00679                                         str = (*aBound)-&gt;getAttribute(<span class="stringliteral">"yMax"</span>); maxBound.setY(strtod(str, 0));
<a name="l00680"></a>00680                                         str = (*aBound)-&gt;getAttribute(<span class="stringliteral">"zMax"</span>); maxBound.setZ(strtod(str, 0));
<a name="l00681"></a>00681 
<a name="l00682"></a>00682                                         <a class="code" href="class_mo_b_a_n_coordinator.html#51f9fc44b5168e7ef6e58fd221bf3f0a" title="Class for performing operation for spatial and temporal correlations in posture selection...">transitions</a>-&gt;<a class="code" href="class_posture_transition.html#309ed6acf7eca6469f0ea0f06ee41780" title="Adds the given boundary to the existing area type specified by the given ID .">setAreaBoundry</a>(typeID,minBound,maxBound);
<a name="l00683"></a>00683                                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"Low bound: "</span>&lt;&lt; minBound.info() &lt;&lt; endl;
<a name="l00684"></a>00684                                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"High bound: "</span>&lt;&lt; maxBound.info() &lt;&lt; endl;
<a name="l00685"></a>00685                                 }
<a name="l00686"></a>00686                         }
<a name="l00687"></a>00687                 }
<a name="l00688"></a>00688 
<a name="l00689"></a>00689         <span class="comment">/* Reading the time domains, if there are any. */</span>
<a name="l00690"></a>00690         tagList = xmlConfig-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#c497a6b66b7f49c6741ad4e5368b28ec">getElementsByTagName</a>(<span class="stringliteral">"timeDomains"</span>);
<a name="l00691"></a>00691 
<a name="l00692"></a>00692         <span class="keywordflow">if</span>( tagList.empty() )
<a name="l00693"></a>00693                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"No time domain is given. So there is no temporal correlation in posture selection."</span> &lt;&lt; endl;
<a name="l00694"></a>00694         <span class="keywordflow">else</span>{
<a name="l00695"></a>00695 
<a name="l00696"></a>00696                         tempTag = tagList.front();
<a name="l00697"></a>00697                         cXMLElementList typeList = tempTag-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#c497a6b66b7f49c6741ad4e5368b28ec">getElementsByTagName</a>(<span class="stringliteral">"timeDomain"</span>);
<a name="l00698"></a>00698 
<a name="l00699"></a>00699                         <span class="keywordflow">if</span>( typeList.empty() )
<a name="l00700"></a>00700                                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a> (<span class="stringliteral">"No timeDomain has been defined in timeDomains!"</span>);
<a name="l00701"></a>00701 
<a name="l00702"></a>00702                         <span class="keywordflow">for</span>(cXMLElementList::const_iterator aType = typeList.begin(); aType != typeList.end(); aType++)
<a name="l00703"></a>00703                         {
<a name="l00704"></a>00704                                 sstr = (*aType)-&gt;getAttribute(<span class="stringliteral">"name"</span>);
<a name="l00705"></a>00705 
<a name="l00706"></a>00706                                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"Time domain "</span> &lt;&lt; sstr &lt;&lt; <span class="stringliteral">" :"</span> &lt;&lt; endl;
<a name="l00707"></a>00707 
<a name="l00708"></a>00708                                 <span class="keywordtype">int</span> typeID = <a class="code" href="class_mo_b_a_n_coordinator.html#51f9fc44b5168e7ef6e58fd221bf3f0a" title="Class for performing operation for spatial and temporal correlations in posture selection...">transitions</a>-&gt;<a class="code" href="class_posture_transition.html#58c7924dfb8810ba37311217a7ba5c8d" title="Adds a time domain to the list with the given name and returns the index of the this...">addTimeDomain</a>(sstr);
<a name="l00709"></a>00709 
<a name="l00710"></a>00710                                 cXMLElementList boundList = (*aType)-&gt;getElementsByTagName(<span class="stringliteral">"boundary"</span>);
<a name="l00711"></a>00711                                 <span class="keywordflow">if</span>( boundList.empty() )
<a name="l00712"></a>00712                                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a> (<span class="stringliteral">"No boundary is given for a time domain!"</span>);
<a name="l00713"></a>00713 
<a name="l00714"></a>00714                                 simtime_t minTime,maxTime;
<a name="l00715"></a>00715                                 <span class="keywordflow">for</span>(cXMLElementList::const_iterator aBound = boundList.begin(); aBound != boundList.end(); aBound++)
<a name="l00716"></a>00716                                 {
<a name="l00717"></a>00717                                         str = (*aBound)-&gt;getAttribute(<span class="stringliteral">"tMin"</span>); minTime = strtod(str,0);
<a name="l00718"></a>00718                                         str = (*aBound)-&gt;getAttribute(<span class="stringliteral">"tMax"</span>); maxTime = strtod(str,0);
<a name="l00719"></a>00719 
<a name="l00720"></a>00720                                         <a class="code" href="class_mo_b_a_n_coordinator.html#51f9fc44b5168e7ef6e58fd221bf3f0a" title="Class for performing operation for spatial and temporal correlations in posture selection...">transitions</a>-&gt;<a class="code" href="class_posture_transition.html#f66d8f9dda835d55dc3009cf582f87d8" title="Adds the given boundary to the existing time domain specified by the given ID .">setTimeBoundry</a>(typeID,minTime,maxTime);
<a name="l00721"></a>00721                                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"Low bound: ("</span>&lt;&lt; minTime.dbl() &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt; maxTime &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; endl;
<a name="l00722"></a>00722                                 }
<a name="l00723"></a>00723                         }
<a name="l00724"></a>00724         }
<a name="l00725"></a>00725 
<a name="l00726"></a>00726         <span class="comment">/* Reading the combinations, if there are any. */</span>
<a name="l00727"></a>00727         tagList = xmlConfig-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#c497a6b66b7f49c6741ad4e5368b28ec">getElementsByTagName</a>(<span class="stringliteral">"combinations"</span>);
<a name="l00728"></a>00728 
<a name="l00729"></a>00729         <span class="keywordflow">if</span>( tagList.empty() )
<a name="l00730"></a>00730                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"No combination is given. The default Markov model is then used for the whole time and space!"</span> &lt;&lt; endl;
<a name="l00731"></a>00731         <span class="keywordflow">else</span>{
<a name="l00732"></a>00732                     tempTag = tagList.front();
<a name="l00733"></a>00733                         cXMLElementList combList = tempTag-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#c497a6b66b7f49c6741ad4e5368b28ec">getElementsByTagName</a>(<span class="stringliteral">"combination"</span>);
<a name="l00734"></a>00734 
<a name="l00735"></a>00735                         <span class="keywordflow">if</span>( combList.empty() )
<a name="l00736"></a>00736                                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a> (<span class="stringliteral">"No combination has been defined in combinations!"</span>);
<a name="l00737"></a>00737 
<a name="l00738"></a>00738                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"Combinations: "</span> &lt;&lt; endl;
<a name="l00739"></a>00739 
<a name="l00740"></a>00740                         <span class="keywordflow">for</span>(cXMLElementList::const_iterator aComb = combList.begin(); aComb != combList.end(); aComb++)
<a name="l00741"></a>00741                         {
<a name="l00742"></a>00742                                 std::string areaName,timeName,matrixName;
<a name="l00743"></a>00743 
<a name="l00744"></a>00744                                 <span class="keywordflow">if</span> ((*aComb)-&gt;getAttribute(<span class="stringliteral">"areaType"</span>) != NULL)
<a name="l00745"></a>00745                                         areaName = (*aComb)-&gt;getAttribute(<span class="stringliteral">"areaType"</span>);
<a name="l00746"></a>00746                                 <span class="keywordflow">else</span>
<a name="l00747"></a>00747                                         areaName.clear();
<a name="l00748"></a>00748 
<a name="l00749"></a>00749                                 <span class="keywordflow">if</span> ( (*aComb)-&gt;getAttribute(<span class="stringliteral">"timeDomain"</span>) != NULL )
<a name="l00750"></a>00750                                         timeName = (*aComb)-&gt;getAttribute(<span class="stringliteral">"timeDomain"</span>);
<a name="l00751"></a>00751                                 <span class="keywordflow">else</span>
<a name="l00752"></a>00752                                         timeName.clear();
<a name="l00753"></a>00753 
<a name="l00754"></a>00754                                 <span class="keywordflow">if</span> ( (*aComb)-&gt;getAttribute(<span class="stringliteral">"matrix"</span>) != NULL )
<a name="l00755"></a>00755                                         matrixName = (*aComb)-&gt;getAttribute(<span class="stringliteral">"matrix"</span>);
<a name="l00756"></a>00756                                 <span class="keywordflow">else</span>
<a name="l00757"></a>00757                                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"No transition matrix is specified for a combination."</span>);
<a name="l00758"></a>00758 
<a name="l00759"></a>00759                                 <a class="code" href="class_mo_b_a_n_coordinator.html#51f9fc44b5168e7ef6e58fd221bf3f0a" title="Class for performing operation for spatial and temporal correlations in posture selection...">transitions</a>-&gt;<a class="code" href="class_posture_transition.html#5b4ab00961c0039aac63143d28e88272" title="Adds a space-time combination to the list.">addCombination</a>(areaName, timeName, matrixName);
<a name="l00760"></a>00760 
<a name="l00761"></a>00761                                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"("</span> &lt;&lt; areaName &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt; timeName &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt; matrixName &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; endl;
<a name="l00762"></a>00762                         }
<a name="l00763"></a>00763                 }
<a name="l00764"></a>00764 
<a name="l00765"></a>00765         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00766"></a>00766 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="31810405333b184c9db891fa9bd8a12a"></a><!-- doxytag: member="MoBANCoordinator::readMobilityPatternFile" ref="31810405333b184c9db891fa9bd8a12a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MoBANCoordinator::readMobilityPatternFile           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reads the previously logged mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> and make mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> data base. 
<p>
This function reads the input mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> file and make a list of the mobility patterns. It will be called in the initialization phase if the useMobilityPattern parameter is true. 
<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00335">335</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00335"></a>00335                                                {
<a name="l00336"></a>00336         <a class="code" href="class_mo_b_a_n_coordinator.html#00cbcb40ee4039ffd5723ffa4334d88f" title="The number of mobility pattern instances which has been read from the input file...">patternLength</a> = 0;
<a name="l00337"></a>00337         <span class="keywordtype">double</span> x, y, z, s;
<a name="l00338"></a>00338         <span class="keywordtype">int</span> id;
<a name="l00339"></a>00339         <span class="keywordtype">char</span> file_name[70];
<a name="l00340"></a>00340         <span class="keywordtype">char</span> posture_name[50];
<a name="l00341"></a>00341 
<a name="l00342"></a>00342         sprintf(file_name, <span class="stringliteral">"%s"</span>, <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#73111b3f286cc723519595a4d8d318f7">par</a>(<span class="stringliteral">"mobilityPatternFile"</span>).stringValue());
<a name="l00343"></a>00343         FILE *fp = fopen(file_name, <span class="stringliteral">"r"</span>);
<a name="l00344"></a>00344         <span class="keywordflow">if</span> (fp == NULL)
<a name="l00345"></a>00345                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00346"></a>00346 
<a name="l00347"></a>00347         <span class="comment">//Count number of patterns (lines in the input file)</span>
<a name="l00348"></a>00348         <span class="keywordtype">int</span> c;
<a name="l00349"></a>00349         <span class="keywordflow">while</span> ((c = fgetc(fp)) != EOF)
<a name="l00350"></a>00350                 <span class="keywordflow">if</span> (c == <span class="charliteral">'\n'</span>)
<a name="l00351"></a>00351                         <a class="code" href="class_mo_b_a_n_coordinator.html#00cbcb40ee4039ffd5723ffa4334d88f" title="The number of mobility pattern instances which has been read from the input file...">patternLength</a>++;
<a name="l00352"></a>00352         fclose(fp);
<a name="l00353"></a>00353 
<a name="l00354"></a>00354         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt; <span class="stringliteral">"Mobility Pattern Length:"</span> &lt;&lt; <a class="code" href="class_mo_b_a_n_coordinator.html#00cbcb40ee4039ffd5723ffa4334d88f" title="The number of mobility pattern instances which has been read from the input file...">patternLength</a> &lt;&lt; endl;
<a name="l00355"></a>00355 
<a name="l00356"></a>00356         <a class="code" href="class_mo_b_a_n_coordinator.html#e19a9a2dce220a75c4757381b5f348a7" title="The mobility pattern data base.">mobilityPattern</a> = <span class="keyword">new</span> <a class="code" href="class_mo_b_a_n_coordinator.html#ba7c0480967381f3cb5c09b05029abe7" title="Data type for one instance of mobility pattern.">Pattern</a>[<a class="code" href="class_mo_b_a_n_coordinator.html#00cbcb40ee4039ffd5723ffa4334d88f" title="The number of mobility pattern instances which has been read from the input file...">patternLength</a>];
<a name="l00357"></a>00357 
<a name="l00358"></a>00358         fp = fopen(file_name,<span class="stringliteral">"r"</span>);
<a name="l00359"></a>00359 
<a name="l00360"></a>00360         <span class="keywordtype">int</span> i=0;
<a name="l00361"></a>00361         <span class="keywordflow">while</span> (fscanf(fp,<span class="stringliteral">"%s %d"</span>,posture_name,&amp;<span class="keywordtype">id</span>)!= -1) {
<a name="l00362"></a>00362                 <a class="code" href="class_mo_b_a_n_coordinator.html#e19a9a2dce220a75c4757381b5f348a7" title="The mobility pattern data base.">mobilityPattern</a>[i].<a class="code" href="struct_mo_b_a_n_coordinator_1_1pattern.html#59e286ef1ae546090710cfcd2c432c9b">postureID</a> = id;
<a name="l00363"></a>00363                 <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[<span class="keywordtype">id</span>]-&gt;isMobile())
<a name="l00364"></a>00364                 {
<a name="l00365"></a>00365                         assert( fscanf(fp,<span class="stringliteral">"%le %le %le %le"</span>,&amp;x,&amp;y,&amp;z,&amp;s)!=-1 );
<a name="l00366"></a>00366                         <a class="code" href="class_mo_b_a_n_coordinator.html#e19a9a2dce220a75c4757381b5f348a7" title="The mobility pattern data base.">mobilityPattern</a>[i].<a class="code" href="struct_mo_b_a_n_coordinator_1_1pattern.html#68ade906cd2a8e99513cd8f34e41e06a">targetPos</a> = Coord(x,y,z);
<a name="l00367"></a>00367                         <a class="code" href="class_mo_b_a_n_coordinator.html#e19a9a2dce220a75c4757381b5f348a7" title="The mobility pattern data base.">mobilityPattern</a>[i].<a class="code" href="struct_mo_b_a_n_coordinator_1_1pattern.html#6956bfc4ee8b53dcc0d13e9a46f4bf96">speed</a> = s;
<a name="l00368"></a>00368                 }
<a name="l00369"></a>00369                 <span class="keywordflow">else</span>
<a name="l00370"></a>00370                 {
<a name="l00371"></a>00371                         assert ( fscanf(fp,<span class="stringliteral">"%le"</span>,&amp;x)!=-1 );
<a name="l00372"></a>00372                         <a class="code" href="class_mo_b_a_n_coordinator.html#e19a9a2dce220a75c4757381b5f348a7" title="The mobility pattern data base.">mobilityPattern</a>[i].<a class="code" href="struct_mo_b_a_n_coordinator_1_1pattern.html#c46502075e05cb35bf6e62d3bc508969">duration</a> = x;
<a name="l00373"></a>00373                 }
<a name="l00374"></a>00374                 ++i;
<a name="l00375"></a>00375         }
<a name="l00376"></a>00376 
<a name="l00377"></a>00377         fclose(fp);
<a name="l00378"></a>00378 
<a name="l00379"></a>00379         <a class="code" href="class_mo_b_a_n_coordinator.html#eff87bd9af8cb9aa14eada4b73ec4fbe" title="The index of the currently applied mobility pattern from.">currentPattern</a> = -1;
<a name="l00380"></a>00380 
<a name="l00381"></a>00381         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00382"></a>00382 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ab85ba2010884afd66f619718e1194d7"></a><!-- doxytag: member="MoBANCoordinator::readPostureSpecificationFile" ref="ab85ba2010884afd66f619718e1194d7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MoBANCoordinator::readPostureSpecificationFile           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reading the input postures specification file and making the posture data base. 
<p>
Function to read the specified posture specification input file and make the posture data base. The posture specification includes the specification of a set of possible body postures in the target application. The specification of each posture should provide the speed range of the global movement of the whole WBAN and the relative position of the reference point, movement radius around the reference point and movement velocity of all nodes in the WBAN. The function will be called in the initialization phase. 
<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00391">391</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00391"></a>00391                                                     {
<a name="l00392"></a>00392 
<a name="l00393"></a>00393         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html">cXMLElement</a>* xmlPosture = <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcComponent.html#73111b3f286cc723519595a4d8d318f7">par</a>(<span class="stringliteral">"postureSpecFile"</span>).<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcPar.html#bc642480c56e9b5717e2c2a11d908ee3">xmlValue</a>();
<a name="l00394"></a>00394         <span class="keywordflow">if</span> (xmlPosture == 0)
<a name="l00395"></a>00395                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00396"></a>00396 
<a name="l00397"></a>00397         <span class="keyword">const</span> <span class="keywordtype">char</span>* str;
<a name="l00398"></a>00398 
<a name="l00399"></a>00399         <span class="comment">//read the specification of every posture from file and make a list of postures</span>
<a name="l00400"></a>00400         cXMLElementList postures;
<a name="l00401"></a>00401 
<a name="l00402"></a>00402         postures = xmlPosture-&gt;<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcXMLElement.html#c497a6b66b7f49c6741ad4e5368b28ec">getElementsByTagName</a>(<span class="stringliteral">"posture"</span>);
<a name="l00403"></a>00403 
<a name="l00404"></a>00404         <span class="comment">//Find the number of defined postures</span>
<a name="l00405"></a>00405         <a class="code" href="class_mo_b_a_n_coordinator.html#3880f0e3e0e489b1edd2692a441b903f" title="Number of predefined postures.">numPostures</a> = postures.size();
<a name="l00406"></a>00406         <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#3880f0e3e0e489b1edd2692a441b903f" title="Number of predefined postures.">numPostures</a> == 0)
<a name="l00407"></a>00407                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"No posture is defined in the input posture specification file"</span>);
<a name="l00408"></a>00408 
<a name="l00409"></a>00409         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> postureID;
<a name="l00410"></a>00410 
<a name="l00411"></a>00411         cXMLElementList::const_iterator posture;
<a name="l00412"></a>00412         <span class="keywordflow">for</span> (posture = postures.begin(); posture != postures.end(); posture++)
<a name="l00413"></a>00413         {
<a name="l00414"></a>00414                 str = (*posture)-&gt;getAttribute(<span class="stringliteral">"postureID"</span>);
<a name="l00415"></a>00415                 postureID = strtol(str, 0, 0);
<a name="l00416"></a>00416                 <span class="keywordflow">if</span> ( postureID &lt; 0 || postureID &gt;= <a class="code" href="class_mo_b_a_n_coordinator.html#3880f0e3e0e489b1edd2692a441b903f" title="Number of predefined postures.">numPostures</a>)
<a name="l00417"></a>00417                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a> (<span class="stringliteral">"Posture ID in input posture specification file is out of the range."</span>);
<a name="l00418"></a>00418 
<a name="l00419"></a>00419                 <a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>.push_back(<span class="keyword">new</span> <a class="code" href="class_posture.html" title="to store the specification of a posture on the MoBAN mobility model.">Posture</a>(postureID, <a class="code" href="class_mo_b_a_n_coordinator.html#92a0e36ffb244bc6ed6beaf98e986c05" title="The number of nodes in the this WBAN.">numNodes</a>));
<a name="l00420"></a>00420 
<a name="l00421"></a>00421                 str = (*posture)-&gt;getAttribute(<span class="stringliteral">"name"</span>);
<a name="l00422"></a>00422                 <a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[postureID]-&gt;setPostureName(const_cast&lt;char*&gt; (str));
<a name="l00423"></a>00423 
<a name="l00424"></a>00424                 str = (*posture)-&gt;getAttribute(<span class="stringliteral">"minSpeed"</span>);
<a name="l00425"></a>00425                 <span class="keywordtype">double</span> minS = strtod(str, 0);
<a name="l00426"></a>00426                 str = (*posture)-&gt;getAttribute(<span class="stringliteral">"maxSpeed"</span>);
<a name="l00427"></a>00427                 <span class="keywordtype">double</span> maxS = strtod(str, 0);
<a name="l00428"></a>00428                 <a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[postureID]-&gt;setPostureSpeed(minS, maxS);
<a name="l00429"></a>00429 
<a name="l00430"></a>00430                 <span class="keywordtype">int</span> i = 0;
<a name="l00431"></a>00431                 <span class="keywordtype">double</span> x, y, z, s, r;
<a name="l00432"></a>00432                 cXMLElementList nodeParameters;
<a name="l00433"></a>00433 
<a name="l00434"></a>00434                 nodeParameters = (*posture)-&gt;getElementsByTagName(<span class="stringliteral">"nodeParameters"</span>);
<a name="l00435"></a>00435                 <span class="keywordflow">if</span> (nodeParameters.size() != <a class="code" href="class_mo_b_a_n_coordinator.html#92a0e36ffb244bc6ed6beaf98e986c05" title="The number of nodes in the this WBAN.">numNodes</a>)
<a name="l00436"></a>00436                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a> (<span class="stringliteral">"Some nodes may not have specified parameters in a posture in input posture specification file."</span>);
<a name="l00437"></a>00437 
<a name="l00438"></a>00438                 cXMLElementList::const_iterator param;
<a name="l00439"></a>00439                 <span class="keywordflow">for</span> (param = nodeParameters.begin(); param!= nodeParameters.end(); param++)
<a name="l00440"></a>00440                 {
<a name="l00441"></a>00441                         str = (*param)-&gt;getAttribute(<span class="stringliteral">"positionX"</span>);
<a name="l00442"></a>00442                         x = strtod(str, 0);
<a name="l00443"></a>00443 
<a name="l00444"></a>00444                         str = (*param)-&gt;getAttribute(<span class="stringliteral">"positionY"</span>);
<a name="l00445"></a>00445                         y = strtod(str, 0);
<a name="l00446"></a>00446 
<a name="l00447"></a>00447                         str = (*param)-&gt;getAttribute(<span class="stringliteral">"positionZ"</span>);
<a name="l00448"></a>00448                         z = strtod(str, 0);
<a name="l00449"></a>00449 
<a name="l00450"></a>00450                         str = (*param)-&gt;getAttribute(<span class="stringliteral">"radius"</span>);
<a name="l00451"></a>00451                         r = strtod(str, 0);
<a name="l00452"></a>00452 
<a name="l00453"></a>00453                         str = (*param)-&gt;getAttribute(<span class="stringliteral">"speed"</span>);
<a name="l00454"></a>00454                         s = strtod(str, 0);
<a name="l00455"></a>00455 
<a name="l00456"></a>00456                         <a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[postureID]-&gt;setPs(i, Coord(x, y, z));
<a name="l00457"></a>00457                         <a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[postureID]-&gt;setRadius(i, r);
<a name="l00458"></a>00458                         <a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[postureID]-&gt;setSpeed(i, s);
<a name="l00459"></a>00459 
<a name="l00460"></a>00460                         i++;
<a name="l00461"></a>00461                 }
<a name="l00462"></a>00462         }
<a name="l00463"></a>00463 
<a name="l00464"></a>00464         <span class="comment">/* Report the obtained specification of the postures. */</span>
<a name="l00465"></a>00465         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_mo_b_a_n_coordinator.html#3880f0e3e0e489b1edd2692a441b903f" title="Number of predefined postures.">numPostures</a>; ++i) {
<a name="l00466"></a>00466                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a>&lt;&lt; <span class="stringliteral">"Information for the posture:"</span>&lt;&lt;i&lt;&lt;<span class="stringliteral">" is"</span>&lt;&lt;endl;
<a name="l00467"></a>00467                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0;j&lt;<a class="code" href="class_mo_b_a_n_coordinator.html#92a0e36ffb244bc6ed6beaf98e986c05" title="The number of nodes in the this WBAN.">numNodes</a>;++j)
<a name="l00468"></a>00468                 <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__Envir.html#g650ef3eff8a2900bef69dae29c05d2dd">EV</a> &lt;&lt; <span class="stringliteral">"Node "</span>&lt;&lt;j&lt;&lt; <span class="stringliteral">" position: "</span>&lt;&lt;<a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[i]-&gt;getPs(j).info()&lt;&lt;
<a name="l00469"></a>00469                 <span class="stringliteral">" and radius:"</span>&lt;&lt;<a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[i]-&gt;getRadius(j)&lt;&lt;<span class="stringliteral">" and speed:"</span>&lt;&lt;<a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[i]-&gt;getSpeed(j)&lt;&lt;endl;
<a name="l00470"></a>00470         }
<a name="l00471"></a>00471 
<a name="l00472"></a>00472         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00473"></a>00473 
<a name="l00474"></a>00474 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="debee0a447b7e85d444054fa3a4ee013"></a><!-- doxytag: member="MoBANCoordinator::selectDestination" ref="debee0a447b7e85d444054fa3a4ee013" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Coord MoBANCoordinator::selectDestination           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to select the destination in the case of a mobile posture. 
<p>
Select a position inside the simulation area as the destination for the new mobile posture. It is called whenever a new stable posture is selected. It is taken into account that all nodes should be inside the area. 
<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00263">263</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00263"></a>00263                                           {
<a name="l00264"></a>00264         Coord res;
<a name="l00265"></a>00265         res = <a class="code" href="class_mo_b_a_n_coordinator.html#19061b8cb8295d5afce5e95bb1c8ea99" title="Pointer to the BaseWorldUtility.">world</a>-&gt;getRandomPosition();
<a name="l00266"></a>00266         res.setZ(<a class="code" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b" title="Current position of the logical center of the group.">logicalCenter</a>.getZ()); <span class="comment">// the z value remain the same</span>
<a name="l00267"></a>00267 
<a name="l00268"></a>00268         <span class="comment">//check if it is okay using CoverRadius</span>
<a name="l00269"></a>00269         <span class="keywordflow">while</span> (!<a class="code" href="class_mo_b_a_n_coordinator.html#a9e9424cb4572715a8f5b042aa4155d0" title="Checks if all nodes of the WBAN are inside the simulation environment w ith the given...">isInsideWorld</a>(res)) {
<a name="l00270"></a>00270                 res = <a class="code" href="class_mo_b_a_n_coordinator.html#19061b8cb8295d5afce5e95bb1c8ea99" title="Pointer to the BaseWorldUtility.">world</a>-&gt;getRandomPosition();
<a name="l00271"></a>00271                 res.setZ(<a class="code" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b" title="Current position of the logical center of the group.">logicalCenter</a>.getZ());
<a name="l00272"></a>00272         }
<a name="l00273"></a>00273 
<a name="l00274"></a>00274         <span class="keywordflow">return</span> res;
<a name="l00275"></a>00275 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b4f9d86a51c84b083817db1fcbe9dbab"></a><!-- doxytag: member="MoBANCoordinator::selectDuration" ref="b4f9d86a51c84b083817db1fcbe9dbab" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t MoBANCoordinator::selectDuration           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Select a stay time duration in the specified range for the new posture. 
<p>
Select a stay time duration in the specified duration range for the new posture. It is called whenever a new stable posture is selected. The selected value should be at least more than the value of updateInterval parameter. 
<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00254">254</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00254"></a>00254                                            {
<a name="l00255"></a>00255         <span class="keywordflow">return</span> <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__RandomNumbersCont.html#g4a63082fca94b8abf6d6164aea972a0f">uniform</a>(<a class="code" href="class_mo_b_a_n_coordinator.html#ac48e46d43458a8f960cc33e84ac85e8" title="The minimum value of the duration for stable postures.">minDuration</a>, <a class="code" href="class_mo_b_a_n_coordinator.html#02c4e8d23a6b0b2e1a1d94abe1974b9f" title="The maximum value of the duration for stable postures.">maxDuration</a>);
<a name="l00256"></a>00256 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b622d4b167d9d5dbc7529969a6688597"></a><!-- doxytag: member="MoBANCoordinator::selectPosture" ref="b622d4b167d9d5dbc7529969a6688597" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MoBANCoordinator::selectPosture           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to select the next posture considering the current posture and the Markov model. 
<p>
Select a new posture randomly or based on the given Markov model. If the requested strategy is not uniform random, A Markov chain will be used. If the strategy is INDIVIDUAL_MARKOV, we should retrieve the transition matrix for the current part of the area. If it is INDIVIDUAL_MARKOV, we have the base transition matrix and a steady state vector for the current part of the area. So the closest transition matrix to the base matrix is calculated which satisfies the required steady state vector. In any case, the next posture is selected considering the current posture and according to the final Markov transition matrix. 
<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00219">219</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00219"></a>00219                                      {
<a name="l00220"></a>00220         <span class="keywordtype">int</span> postureID;
<a name="l00221"></a>00221 
<a name="l00222"></a>00222         <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#626ad8d08de1e3d7fad2c8032f199933" title="The requested strategy for posture selection. To be given through configuration file...">postureSelStrategy</a> == <a class="code" href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb9357a18191c1994fee0d7b81c953ff015d">UNIFORM_RANDOM</a>) {
<a name="l00223"></a>00223                 postureID = floor(<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__RandomNumbersCont.html#g4a63082fca94b8abf6d6164aea972a0f">uniform</a>(0, <a class="code" href="class_mo_b_a_n_coordinator.html#3880f0e3e0e489b1edd2692a441b903f" title="Number of predefined postures.">numPostures</a>)); <span class="comment">// uniformly random posture selection</span>
<a name="l00224"></a>00224                 <a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[postureID];
<a name="l00225"></a>00225                 <span class="keywordflow">return</span>;
<a name="l00226"></a>00226         }
<a name="l00227"></a>00227 
<a name="l00228"></a>00228         <span class="comment">/* Here we check the area and the time to determine the corresponding posture transition matrix */</span>
<a name="l00229"></a>00229         <a class="code" href="class_mo_b_a_n_coordinator.html#406987de5c4e38c461e0857583c115b2" title="A matrix which maintains the transition probabilities of the Markov Model of posture...">markovMatrix</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#51f9fc44b5168e7ef6e58fd221bf3f0a" title="Class for performing operation for spatial and temporal correlations in posture selection...">transitions</a>-&gt;<a class="code" href="class_posture_transition.html#1f04b24b643026f15fbc95d175429c5f" title="Gets a time and location, and returns the corresponding Markov transition matrix...">getMatrix</a>(simTime(),<a class="code" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b" title="Current position of the logical center of the group.">logicalCenter</a>);
<a name="l00230"></a>00230 
<a name="l00231"></a>00231         <span class="comment">/* Using transition matrix to select the next posture */</span>
<a name="l00232"></a>00232         <span class="keywordtype">double</span> randomValue = <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__RandomNumbersCont.html#g4a63082fca94b8abf6d6164aea972a0f">uniform</a>(0, 1);
<a name="l00233"></a>00233         <span class="keywordtype">double</span> comp;
<a name="l00234"></a>00234         <span class="keywordtype">int</span> currentP = <a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#217bc7334d61b9441c06affd81798445" title="Returns the unique Id (index) of this posture.">getPostureID</a>(); <span class="comment">// it determines the column in the matrix</span>
<a name="l00235"></a>00235 
<a name="l00236"></a>00236         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_mo_b_a_n_coordinator.html#3880f0e3e0e489b1edd2692a441b903f" title="Number of predefined postures.">numPostures</a>; ++i)
<a name="l00237"></a>00237         {
<a name="l00238"></a>00238                 comp += <a class="code" href="class_mo_b_a_n_coordinator.html#406987de5c4e38c461e0857583c115b2" title="A matrix which maintains the transition probabilities of the Markov Model of posture...">markovMatrix</a>[i][currentP];
<a name="l00239"></a>00239                 <span class="keywordflow">if</span> (randomValue &lt; comp)
<a name="l00240"></a>00240                 {
<a name="l00241"></a>00241                         postureID = i;
<a name="l00242"></a>00242                         <span class="keywordflow">break</span>;
<a name="l00243"></a>00243                 }
<a name="l00244"></a>00244         }
<a name="l00245"></a>00245 
<a name="l00246"></a>00246         <a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5" title="The list of all predefined postures (posture data base).">postureList</a>[postureID];
<a name="l00247"></a>00247 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6d83b8c03d91b0fee3e335b214f51b4c"></a><!-- doxytag: member="MoBANCoordinator::selectSpeed" ref="6d83b8c03d91b0fee3e335b214f51b4c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double MoBANCoordinator::selectSpeed           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Select a velocity value within the given velocity range. 
<p>
Select a velocity value within the given velocity range. It is called whenever a new stable posture is selected. In the case of using a logged mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>, the speed value is retrieved from the <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>. 
<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00282">282</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00282"></a>00282                                      {
<a name="l00283"></a>00283         <span class="keywordflow">return</span> (<a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/group__RandomNumbersCont.html#g4a63082fca94b8abf6d6164aea972a0f">uniform</a>(<a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#c805f463e2f12178b128f741cfc2f8ec" title="Returns minimum value of the speed range of this posture.">getMinSpeed</a>(),
<a name="l00284"></a>00284                         <a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#99d879a60f411811fad6949c3b7811a3" title="Returns maximum value of the speed range of this posture.">getMaxSpeed</a>()));
<a name="l00285"></a>00285 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="bfe32e4c7881e7b5d5276e5b90fb82a6"></a><!-- doxytag: member="MoBANCoordinator::stepMove" ref="bfe32e4c7881e7b5d5276e5b90fb82a6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MoBANCoordinator::stepMove           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Making one step move and publishing the new reference point position to all belonging nodes. 
<p>
If the new posture is stable , publish reference points, and then wait for the selected time duration. If the posture is a mobile posture, move the logical center of the WBAN step by step until it reaches the selected destination. To do so, the new position of the reference points are published every "updateInterval" seconds. Then go for another posture selection. 
<p>
publish info if the posture is mobile or it is the first step after a posture change. So for a stable posture, just one time the information will be published. 
<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html#l00108">108</a> of file <a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00108"></a>00108                                 {
<a name="l00109"></a>00109         <a class="code" href="class_mo_b_a_n_coordinator.html#c1a5ee7eeedb62fdfcee79fb6234f762" title="Number of steps already moved.">step</a>++;
<a name="l00110"></a>00110 
<a name="l00111"></a>00111         <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#7057d6de18f8fd8d646e0d370ab8c2a5" title="Check if this posture is mobile by checking the maximum possible speed.">isMobile</a>()) {
<a name="l00112"></a>00112                 <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#c1a5ee7eeedb62fdfcee79fb6234f762" title="Number of steps already moved.">step</a> == <a class="code" href="class_mo_b_a_n_coordinator.html#f177cb826e1fec16faf7c7cbd0390cf5" title="Total number of steps of the current move or current posture.">numSteps</a>) { <span class="comment">// reach the target</span>
<a name="l00113"></a>00113                         <a class="code" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b" title="Current position of the logical center of the group.">logicalCenter</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#25c1728a5480570b4b8fe51b4a4a5f02" title="The intermediate target of the current move step.">stepTarget</a>;
<a name="l00114"></a>00114                         <a class="code" href="class_mo_b_a_n_coordinator.html#b69a463af831ecb1c87daa61c09c9509" title="The main process of the MoBAN mobility model.">mainProcess</a>();
<a name="l00115"></a>00115                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#c1a5ee7eeedb62fdfcee79fb6234f762" title="Number of steps already moved.">step</a> &lt; <a class="code" href="class_mo_b_a_n_coordinator.html#f177cb826e1fec16faf7c7cbd0390cf5" title="Total number of steps of the current move or current posture.">numSteps</a>) {
<a name="l00116"></a>00116                         <span class="comment">// step forward</span>
<a name="l00117"></a>00117                         <a class="code" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b" title="Current position of the logical center of the group.">logicalCenter</a> = <a class="code" href="class_mo_b_a_n_coordinator.html#25c1728a5480570b4b8fe51b4a4a5f02" title="The intermediate target of the current move step.">stepTarget</a>;
<a name="l00118"></a>00118                         <a class="code" href="class_mo_b_a_n_coordinator.html#25c1728a5480570b4b8fe51b4a4a5f02" title="The intermediate target of the current move step.">stepTarget</a> += <a class="code" href="class_mo_b_a_n_coordinator.html#56735487e55a96bd1294af15883f2d9c" title="The size of the current move step.">stepSize</a>;
<a name="l00119"></a>00119                 } <span class="keywordflow">else</span>
<a name="l00120"></a>00120                         <a class="codeRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcSimpleModule.html#31fa5f75091ee137832ee6d2d714fb19">error</a>(<span class="stringliteral">"step should be less than numSteps"</span>);
<a name="l00121"></a>00121         } <span class="keywordflow">else</span> {
<a name="l00122"></a>00122                 <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#c1a5ee7eeedb62fdfcee79fb6234f762" title="Number of steps already moved.">step</a> == <a class="code" href="class_mo_b_a_n_coordinator.html#f177cb826e1fec16faf7c7cbd0390cf5" title="Total number of steps of the current move or current posture.">numSteps</a>)
<a name="l00123"></a>00123                         <a class="code" href="class_mo_b_a_n_coordinator.html#b69a463af831ecb1c87daa61c09c9509" title="The main process of the MoBAN mobility model.">mainProcess</a>();
<a name="l00124"></a>00124         }
<a name="l00125"></a>00125 
<a name="l00129"></a>00129         <span class="keywordflow">if</span> (<a class="code" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46" title="The current selected posture.">currentPosture</a>-&gt;<a class="code" href="class_posture.html#7057d6de18f8fd8d646e0d370ab8c2a5" title="Check if this posture is mobile by checking the maximum possible speed.">isMobile</a>() || <a class="code" href="class_mo_b_a_n_coordinator.html#c1a5ee7eeedb62fdfcee79fb6234f762" title="Number of steps already moved.">step</a> == 1)
<a name="l00130"></a>00130                 <a class="code" href="class_mo_b_a_n_coordinator.html#7e5b78357b30b23f2f8285dcde5c6dd9" title="Publishes the reference point and other information of the posture to the blackboard...">publishToNodes</a>();
<a name="l00131"></a>00131 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="eff87bd9af8cb9aa14eada4b73ec4fbe"></a><!-- doxytag: member="MoBANCoordinator::currentPattern" ref="eff87bd9af8cb9aa14eada4b73ec4fbe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_mo_b_a_n_coordinator.html#eff87bd9af8cb9aa14eada4b73ec4fbe">MoBANCoordinator::currentPattern</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The index of the currently applied mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> from. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00170">170</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="19a97a40859c36012f3a63a7c9ef9b46"></a><!-- doxytag: member="MoBANCoordinator::currentPosture" ref="19a97a40859c36012f3a63a7c9ef9b46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_posture.html">Posture</a>* <a class="el" href="class_mo_b_a_n_coordinator.html#19a97a40859c36012f3a63a7c9ef9b46">MoBANCoordinator::currentPosture</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The current selected posture. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00115">115</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="970cba11aaab643710065c962ce626fc"></a><!-- doxytag: member="MoBANCoordinator::debug" ref="970cba11aaab643710065c962ce626fc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_mo_b_a_n_coordinator.html#970cba11aaab643710065c962ce626fc">MoBANCoordinator::debug</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Debug switch for all other modules. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00078">78</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="e65c511653f346fbb079389ab23b62cf"></a><!-- doxytag: member="MoBANCoordinator::duration" ref="e65c511653f346fbb079389ab23b62cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_mo_b_a_n_coordinator.html#e65c511653f346fbb079389ab23b62cf">MoBANCoordinator::duration</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The selected duration of the current posture. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00118">118</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="5320bb16f51acc82b6419911a280e11d"></a><!-- doxytag: member="MoBANCoordinator::index" ref="5320bb16f51acc82b6419911a280e11d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_mo_b_a_n_coordinator.html#5320bb16f51acc82b6419911a280e11d">MoBANCoordinator::index</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Index of this WBAN. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00103">103</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="bb700aed062784b7cb21eec3e146c80d"></a><!-- doxytag: member="MoBANCoordinator::logfile" ref="bb700aed062784b7cb21eec3e146c80d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FILE* <a class="el" href="class_mo_b_a_n_coordinator.html#bb700aed062784b7cb21eec3e146c80d">MoBANCoordinator::logfile</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pointer to the file for logging MoBAN mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> for future use. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00106">106</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="2d0384199e2090caae09813e7d7f0d3b"></a><!-- doxytag: member="MoBANCoordinator::logicalCenter" ref="2d0384199e2090caae09813e7d7f0d3b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Coord <a class="el" href="class_mo_b_a_n_coordinator.html#2d0384199e2090caae09813e7d7f0d3b">MoBANCoordinator::logicalCenter</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Current position of the logical center of the group. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00130">130</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="406987de5c4e38c461e0857583c115b2"></a><!-- doxytag: member="MoBANCoordinator::markovMatrix" ref="406987de5c4e38c461e0857583c115b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double** <a class="el" href="class_mo_b_a_n_coordinator.html#406987de5c4e38c461e0857583c115b2">MoBANCoordinator::markovMatrix</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A matrix which maintains the transition probabilities of the Markov Model of posture <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a>. To be given through configuration file. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00175">175</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="02c4e8d23a6b0b2e1a1d94abe1974b9f"></a><!-- doxytag: member="MoBANCoordinator::maxDuration" ref="02c4e8d23a6b0b2e1a1d94abe1974b9f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_mo_b_a_n_coordinator.html#02c4e8d23a6b0b2e1a1d94abe1974b9f">MoBANCoordinator::maxDuration</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The maximum value of the duration for stable postures. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00124">124</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="ac48e46d43458a8f960cc33e84ac85e8"></a><!-- doxytag: member="MoBANCoordinator::minDuration" ref="ac48e46d43458a8f960cc33e84ac85e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_mo_b_a_n_coordinator.html#ac48e46d43458a8f960cc33e84ac85e8">MoBANCoordinator::minDuration</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The minimum value of the duration for stable postures. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00121">121</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="e19a9a2dce220a75c4757381b5f348a7"></a><!-- doxytag: member="MoBANCoordinator::mobilityPattern" ref="e19a9a2dce220a75c4757381b5f348a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html">Pattern</a>* <a class="el" href="class_mo_b_a_n_coordinator.html#e19a9a2dce220a75c4757381b5f348a7">MoBANCoordinator::mobilityPattern</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> data base. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00162">162</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="aaf28b9f6f1de9fdf6872f123a7f3d53"></a><!-- doxytag: member="MoBANCoordinator::MoveMsg" ref="aaf28b9f6f1de9fdf6872f123a7f3d53" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcMessage.html">cMessage</a>* <a class="el" href="class_mo_b_a_n_coordinator.html#aaf28b9f6f1de9fdf6872f123a7f3d53">MoBANCoordinator::MoveMsg</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A self message to trigger move step every updateInterval seconds. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00093">93</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="7ad23bfc4185e34e462e2b06d349a78f"></a><!-- doxytag: member="MoBANCoordinator::network" ref="7ad23bfc4185e34e462e2b06d349a78f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="opptags.xml:D:\WORK\omnetpp-4.1\/doc/api/" href="D:\WORK\omnetpp-4.1\/doc/api/classcModule.html">cModule</a>* <a class="el" href="class_mo_b_a_n_coordinator.html#7ad23bfc4185e34e462e2b06d349a78f">MoBANCoordinator::network</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pointer to the top level (network). 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00087">87</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="2066591b0b290550ee350b5a57c0c700"></a><!-- doxytag: member="MoBANCoordinator::nodeIndex" ref="2066591b0b290550ee350b5a57c0c700" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* <a class="el" href="class_mo_b_a_n_coordinator.html#2066591b0b290550ee350b5a57c0c700">MoBANCoordinator::nodeIndex</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
the index list of nodes belong to this WBAN 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00127">127</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="92a0e36ffb244bc6ed6beaf98e986c05"></a><!-- doxytag: member="MoBANCoordinator::numNodes" ref="92a0e36ffb244bc6ed6beaf98e986c05" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_mo_b_a_n_coordinator.html#92a0e36ffb244bc6ed6beaf98e986c05">MoBANCoordinator::numNodes</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The number of nodes in the this WBAN. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00097">97</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="3880f0e3e0e489b1edd2692a441b903f"></a><!-- doxytag: member="MoBANCoordinator::numPostures" ref="3880f0e3e0e489b1edd2692a441b903f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_mo_b_a_n_coordinator.html#3880f0e3e0e489b1edd2692a441b903f">MoBANCoordinator::numPostures</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Number of predefined postures. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00109">109</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="f177cb826e1fec16faf7c7cbd0390cf5"></a><!-- doxytag: member="MoBANCoordinator::numSteps" ref="f177cb826e1fec16faf7c7cbd0390cf5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_mo_b_a_n_coordinator.html#f177cb826e1fec16faf7c7cbd0390cf5">MoBANCoordinator::numSteps</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Total number of steps of the current move or current posture. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00136">136</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="00cbcb40ee4039ffd5723ffa4334d88f"></a><!-- doxytag: member="MoBANCoordinator::patternLength" ref="00cbcb40ee4039ffd5723ffa4334d88f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_mo_b_a_n_coordinator.html#00cbcb40ee4039ffd5723ffa4334d88f">MoBANCoordinator::patternLength</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The number of mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> instances which has been read from the input file (length of mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> data base). 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00167">167</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="fbb28bcb93bda1faadc7030d86be43b5"></a><!-- doxytag: member="MoBANCoordinator::postureList" ref="fbb28bcb93bda1faadc7030d86be43b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="class_posture.html">Posture</a>*&gt; <a class="el" href="class_mo_b_a_n_coordinator.html#fbb28bcb93bda1faadc7030d86be43b5">MoBANCoordinator::postureList</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The list of all predefined postures (posture data base). 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00112">112</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="626ad8d08de1e3d7fad2c8032f199933"></a><!-- doxytag: member="MoBANCoordinator::postureSelStrategy" ref="626ad8d08de1e3d7fad2c8032f199933" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_mo_b_a_n_coordinator.html#891080762617c76085a1c4cd618fbb93">posture_sel_type</a> <a class="el" href="class_mo_b_a_n_coordinator.html#626ad8d08de1e3d7fad2c8032f199933">MoBANCoordinator::postureSelStrategy</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The requested strategy for posture selection. To be given through configuration file. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00184">184</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="fdfb553fa2576a3e72a6111b12f14a97"></a><!-- doxytag: member="MoBANCoordinator::speed" ref="fdfb553fa2576a3e72a6111b12f14a97" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="class_mo_b_a_n_coordinator.html#fdfb553fa2576a3e72a6111b12f14a97">MoBANCoordinator::speed</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Currently selected speed for the mobile posture. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00100">100</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="c1a5ee7eeedb62fdfcee79fb6234f762"></a><!-- doxytag: member="MoBANCoordinator::step" ref="c1a5ee7eeedb62fdfcee79fb6234f762" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_mo_b_a_n_coordinator.html#c1a5ee7eeedb62fdfcee79fb6234f762">MoBANCoordinator::step</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Number of steps already moved. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00133">133</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="56735487e55a96bd1294af15883f2d9c"></a><!-- doxytag: member="MoBANCoordinator::stepSize" ref="56735487e55a96bd1294af15883f2d9c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Coord <a class="el" href="class_mo_b_a_n_coordinator.html#56735487e55a96bd1294af15883f2d9c">MoBANCoordinator::stepSize</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The size of the current move step. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00145">145</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="25c1728a5480570b4b8fe51b4a4a5f02"></a><!-- doxytag: member="MoBANCoordinator::stepTarget" ref="25c1728a5480570b4b8fe51b4a4a5f02" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Coord <a class="el" href="class_mo_b_a_n_coordinator.html#25c1728a5480570b4b8fe51b4a4a5f02">MoBANCoordinator::stepTarget</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The intermediate target of the current move step. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00142">142</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="56143810b39a6031abe1cc59a18136c3"></a><!-- doxytag: member="MoBANCoordinator::targetPos" ref="56143810b39a6031abe1cc59a18136c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Coord <a class="el" href="class_mo_b_a_n_coordinator.html#56143810b39a6031abe1cc59a18136c3">MoBANCoordinator::targetPos</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Selected destination for the ongoing move of the logical center. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00139">139</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="51f9fc44b5168e7ef6e58fd221bf3f0a"></a><!-- doxytag: member="MoBANCoordinator::transitions" ref="51f9fc44b5168e7ef6e58fd221bf3f0a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_posture_transition.html">PostureTransition</a>* <a class="el" href="class_mo_b_a_n_coordinator.html#51f9fc44b5168e7ef6e58fd221bf3f0a">MoBANCoordinator::transitions</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Class for performing operation for spatial and temporal correlations in posture selection. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00187">187</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="4b679462d1e5489af4b5a5480f22fdaa"></a><!-- doxytag: member="MoBANCoordinator::updateInterval" ref="4b679462d1e5489af4b5a5480f22fdaa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="class_mo_b_a_n_coordinator.html#4b679462d1e5489af4b5a5480f22fdaa">MoBANCoordinator::updateInterval</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Interval for updating the move (NED parameter). 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00090">90</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="6f67cb3412735ec31734d8a345688e5b"></a><!-- doxytag: member="MoBANCoordinator::useMobilityPattern" ref="6f67cb3412735ec31734d8a345688e5b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_mo_b_a_n_coordinator.html#6f67cb3412735ec31734d8a345688e5b">MoBANCoordinator::useMobilityPattern</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Variable that shows if reusing previously logged mobility <a class="el" href="struct_mo_b_a_n_coordinator_1_1pattern.html" title="Data type for one instance of mobility pattern.">pattern</a> is requested. The value is gotten from the parameter of the module. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00150">150</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="5350548b74b23200b0ba382f157d334b"></a><!-- doxytag: member="MoBANCoordinator::utility" ref="5350548b74b23200b0ba382f157d334b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BaseUtility* <a class="el" href="class_mo_b_a_n_coordinator.html#5350548b74b23200b0ba382f157d334b">MoBANCoordinator::utility</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pointer to the BaseUtility. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00081">81</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="19061b8cb8295d5afce5e95bb1c8ea99"></a><!-- doxytag: member="MoBANCoordinator::world" ref="19061b8cb8295d5afce5e95bb1c8ea99" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BaseWorldUtility* <a class="el" href="class_mo_b_a_n_coordinator.html#19061b8cb8295d5afce5e95bb1c8ea99">MoBANCoordinator::world</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pointer to the BaseWorldUtility. 
<p>

<p>Definition at line <a class="el" href="_mo_b_a_n_coordinator_8h-source.html#l00084">84</a> of file <a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_mo_b_a_n_coordinator_8h-source.html">MoBANCoordinator.h</a><li><a class="el" href="_mo_b_a_n_coordinator_8cc-source.html">MoBANCoordinator.cc</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Mar 18 10:12:44 2011 for MoBAN by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
